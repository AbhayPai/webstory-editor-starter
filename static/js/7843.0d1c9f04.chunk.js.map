{"version":3,"file":"static/js/7843.0d1c9f04.chunk.js","mappings":"4LAEA,SAASA,EAAKC,GAAoB,IAAnB,MAAEC,EAAK,OAAEC,GAAQF,EAC9B,OAAOC,EAAQC,CACjB,CACA,SAASC,EAAMC,GACb,MAAMC,EAAS,KADaC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GAE/B,OAAOG,KAAKN,OAAOC,EAAQM,OAAOC,SAAWN,GAAUA,CACzD,CAIA,MAAMO,EACJC,WAAAA,CAAYC,GACVC,KAAKD,WAAaA,EAClBC,KAAKC,KAAO,GACZD,KAAKE,EAAI,CACX,CACAC,OAAAA,CAAQC,EAAGC,GACT,OAAOL,KAAKD,WAAWC,KAAKC,KAAKG,GAAIJ,KAAKC,KAAKI,IAAM,CACvD,CACAC,IAAAA,CAAKF,EAAGC,GACN,MAAME,EAAOP,KAAKC,KAAKG,GACvBJ,KAAKC,KAAKG,GAAKJ,KAAKC,KAAKI,GACzBL,KAAKC,KAAKI,GAAKE,CACjB,CACAC,IAAAA,CAAKJ,GACH,IAAIK,EAAIL,EACJM,EAAKhB,KAAKiB,MAAMF,EAAI,GACxB,KAAOA,EAAI,GAAKT,KAAKG,QAAQO,EAAID,IAC/BT,KAAKM,KAAKI,EAAID,GACdA,EAAIC,EACJA,EAAKhB,KAAKiB,MAAMF,EAAI,EAExB,CACAG,IAAAA,CAAKR,GACH,IAAIK,EAAIL,EACJM,EAAS,EAAJD,EACT,KAAOC,GAAMV,KAAKE,IACZQ,EAAKV,KAAKE,GAAKF,KAAKG,QAAQO,EAAIA,EAAK,KAAIA,GAAM,GAC9CV,KAAKG,QAAQM,EAAGC,KACrBV,KAAKM,KAAKG,EAAGC,GACbD,EAAIC,EACJA,EAAS,EAAJD,CAET,CACAI,IAAAA,CAAKC,GACHd,KAAKE,GAAK,EACVF,KAAKC,KAAKD,KAAKE,GAAKY,EACpBd,KAAKQ,KAAKR,KAAKE,EACjB,CACAa,GAAAA,GACE,GAAe,IAAXf,KAAKE,EAAS,OAClBF,KAAKM,KAAK,EAAGN,KAAKE,GAClBF,KAAKE,GAAK,EACV,MAAMc,EAAMhB,KAAKC,KAAKc,MAEtB,OADAf,KAAKY,KAAK,GACHI,CACT,CACAC,IAAAA,GACE,OAAOjB,KAAKE,CACd,EAmCF,SAASgB,EAAiBC,EAAOC,EAAWC,GAC1C,MAAMC,EAlCR,SAA4BH,EAAOC,EAAWC,GAC5C,MAAMC,EAAgC,IAAIC,IACpCC,EAA0B,IAAIC,IAC9BC,EAAsC,IAAIH,IAChDG,EAAoBC,IAAIP,EAAW,GACnC,MAAMQ,EAAQ,IAAI/B,GA3DegC,EA2DoBC,GAAOA,EAAGC,OA1DxD,CAACC,EAAGC,IAAMJ,EAAKI,GAAKJ,EAAKG,KADlC,IAAmCH,EA6DjC,IADAD,EAAMf,KAAK,CAAEqB,GAAId,EAAWW,OAAQ,IAC7BH,EAAMX,OAAS,GAAG,CACvB,MAAM,GAAEiB,EAAE,OAAEH,GAAWH,EAAMb,MAC7B,IAAKS,EAAQW,IAAID,GAAK,CACpB,MAAME,EAAmBjB,EAAMe,GAC/BV,EAAQa,IAAIH,GACZE,EAAiBE,SAAQ,CAACC,EAAgBC,KACxC,MAAMC,EAAYV,EAASQ,EACrBG,EAAYpB,EAAcqB,IAAIH,GAC9BI,EAAgBlB,EAAoBiB,IAAIH,SACxB,IAAlBI,GAA4BA,EAAgBH,IAAcG,EAAgBH,EAAY,YAAuB,IAAdC,GAAwBA,EAAYR,MACrIR,EAAoBC,IAAIa,EAAUC,GAClCb,EAAMf,KAAK,CAAEqB,GAAIM,EAAUT,OAAQU,IACnCnB,EAAcK,IAAIa,EAAUN,GAC9B,GAEJ,CACF,CACA,OAAOR,EAAoBS,IAAId,GAAWC,OAAgB,CAC5D,CASwBuB,CAAmB1B,EAAOC,EAAWC,GAC3D,OAAOC,EATT,SAAkCA,EAAeD,GAC/C,MAAMyB,EAAQ,GACd,IAAK,IAAIC,EAAO1B,OAAkB,IAAT0B,EAAiBA,EAAOzB,EAAcqB,IAAII,GACjED,EAAMjC,KAAKkC,GAEb,OAAOD,EAAME,SACf,CAGyBC,CAAyB3B,EAAeD,QAAW,CAC5E,CASA,SAAS6B,EAAgBC,EAAKC,EAAgBC,EAASC,GAGrD,OAFiBF,GAAkBD,EAAI3D,OAAS,GAAK6D,EAAU,EAAIC,EAAUH,EAAI3D,QACxD2D,EAAII,QAAO,CAACC,EAAKC,IAAUD,EAAMxE,EAAMyE,IAAQ,EAE1E,CACA,SAASC,EAAKC,EAAQvD,EAAGC,EAAGnB,EAAO0E,EAAiBP,EAASC,GAC3D,MAAMH,EAAMQ,EAAOE,MAAMzD,EAAGC,GACtByD,EAAeZ,EAAgBC,EAAKjE,EAAOmE,EAASC,GAC1D,OAAOQ,EAAe,GAAKA,EAAeF,IAAoB,EAAIT,EAAI3D,YAAS,CACjF,CAwBA,SAASuE,EAAiBC,GAGvB,IAHwB,OACzBL,EAAM,cACNM,GACDD,EACC,MAAM,QAAEX,EAAO,QAAEC,EAAO,eAAEF,EAAc,gBAAEQ,EAAe,eAAEM,GAAmBD,EACxEE,EA9CR,SAA4BC,GAIzB,IAJ0B,OAC3BT,EAAM,gBACNC,EAAe,eACfR,GACDgB,EAEC,OAAOhF,EAAMgE,EAAiBQ,EADbD,EAAOJ,QAAO,CAACC,EAAKC,IAAU/D,KAAK2E,IAAIrF,EAAMyE,GAAQD,IAAM7D,OAAO2E,YACvB,CAC9D,CAuC0BC,CAAoB,CAAEZ,SAAQP,iBAAgBQ,oBAChEY,EA7BR,SAA4BC,GAMzB,IAN0B,OAC3Bd,EAAM,cACNM,EAAa,gBACbL,EAAe,gBACfO,EAAe,eACfD,GACDO,EACC,OAAQ1B,IACN,IAAI2B,EAAIC,EACR,MAAM,eAAEvB,EAAc,QAAEC,EAAO,QAAEC,GAAYW,EACvCW,EAA0B,IAAIrD,IACpCqD,EAAQjD,IAAIoB,EAAM,GAClB,MAAM8B,EAAmF,OAApEH,EAAuB,MAAlBR,OAAyB,EAASA,EAAeY,WAAqBJ,EAAK,EAC/FK,EAAYrF,KAAK2E,IAAIF,EAAsF,OAApEQ,EAAuB,MAAlBT,OAAyB,EAASA,EAAec,WAAqBL,EAAKM,KAC7H,IAAK,IAAI7E,EAAI2C,EAAO8B,EAAazE,EAAIuD,EAAOnE,OAAS,KAC/CY,EAAI2C,EAAOgC,GADuC3E,GAAK,EAAG,CAE9D,MAAM8E,EAAcxB,EAAKC,EAAQZ,EAAM3C,EAAGgD,EAAgBQ,EAAiBP,EAASC,GACpF,QAAoB,IAAhB4B,EAAwB,MAC5BN,EAAQjD,IAAIvB,EAAG8E,EACjB,CACA,OAAON,CAAO,CAElB,CAOuBO,CAAoB,CACvCxB,SACAM,gBACAL,kBACAO,kBACAD,mBAEIkB,EAAOlE,EAAiBsD,EAAc,EAAGb,EAAOnE,QACtD,QAAa,IAAT4F,EAAiB,OACrB,MAAMC,EAAS,GACf,IAAK,IAAIjF,EAAI,EAAGA,EAAIgF,EAAK5F,OAAQY,GAAK,EAAG,CACvC,MAAM+C,EAAMQ,EAAO2B,KAAI,CAAC7B,EAAO8B,KAAU,CAAG9B,QAAO8B,YAAU1B,MAAMuB,EAAKhF,EAAI,GAAIgF,EAAKhF,IAC/EjB,EAAS+D,EACbC,EAAImC,KAAIE,IAAA,IAAC,MAAE/B,GAAO+B,EAAA,OAAK/B,CAAK,IAC5BL,EACAC,EACAC,GAEF+B,EAAOxE,KACLsC,EAAImC,KAAI,CAAAG,EAAmBC,KAAU,IAA5B,MAAEjC,EAAK,MAAE8B,GAAOE,EAAA,MAAkB,CACzChC,QACA4B,OAAQ,CACNlG,SACAD,MAAOC,EAASH,EAAMyE,GACtB8B,QACAG,aACAC,YAAaxC,EAAI3D,QAEpB,IAEL,CACA,OAAO6F,CACT,CACA,SAASO,IAAiB,QAAAC,EAAAtG,UAAAC,OAATsG,EAAO,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAPF,EAAOE,GAAAzG,UAAAyG,GACtB,MAAO,IAAIF,GAASG,QAAQC,GAAQC,QAAQD,KAAME,KAAK,IACzD,CACA,SAASC,EAAUC,EAAMC,EAAatC,GACpC,MAAM,MAAE/E,EAAK,YAAEyG,GAAgBY,GACzB,OAAElB,EAAM,QAAEhC,EAAO,QAAEC,EAAO,eAAEF,GAAmBa,EAC/CuC,EAAmB,SAAXnB,EAAoBM,EAAc1B,EAAcwC,QACxDC,EAAOrD,GAAWmD,EAAQ,GAAK,EAAIlD,EAAUkD,EACnD,MAAO,SAASF,OAAUI,UAAatH,GAAOgE,EAAiBsD,GAAQxH,EAAO,KAChF,CACA,SAASyH,EAActB,EAAQpB,GAC7B,MAAgC,SAAzBA,EAAcoB,OAAoB,eAAe,EAAIpB,EAAcX,aAAe+C,EAAU,OAAQhB,EAAQpB,EACrH,CACA,SAAS2C,EAAoB3F,EAAMoE,EAAQpB,GACzC,IAAIS,EAAIC,EACR,OAAO0B,EAAuF,OAA5E1B,EAAkD,OAA5CD,EAAKzD,EAAK4F,MAAM,8BAAmC,EAASnC,EAAG,IAAcC,EAAK1D,EAAMoE,EAAQpB,EAC1H,CACA,SAAS6C,EAAerD,EAAO4B,EAAQpB,GACrC,IAAIS,EACJ,IAAIqC,EACAC,EACJ,MAAMC,EAASxD,EAAMsD,QAAUtD,EAAMwD,OAWrC,OAVIA,GAAUA,EAAOzH,OAAS,IAC5BuH,EAASE,EAAOC,OACbD,EAAOE,MAAKC,IAAA,IAAC,MAAElI,GAAOkI,EAAA,OAAKlI,IAAUuE,EAAMvE,KAAK,IAAqE,GAAjE,CAAC,CAAEmI,IAAK5D,EAAM4D,IAAKnI,MAAOuE,EAAMvE,MAAOC,OAAQsE,EAAMtE,UAC1GmI,MAAK,CAACC,EAAOC,IAAWD,EAAMrI,MAAQsI,EAAOtI,QAAOoG,KAAKmC,GAAU,GAAGA,EAAMJ,OAAOI,EAAMvI,WAAUkH,KAAK,OAG1GY,GADgC,OAA7BtC,EAAKT,EAAc+C,YAAiB,EAAStC,EAAGzD,OAC1CgD,EAAc+C,MAAMA,OAAS,IAAI1B,KAAIoC,IAAA,IAAC,SAAEC,EAAQ,KAAE1G,GAAMyG,EAAA,MAAK,GAAGC,KAAYf,EAAoB3F,EAAMoE,EAAQpB,IAAgB,IAAEiD,OAAON,EAAoB3C,EAAc+C,MAAM/F,KAAMoE,EAAQpB,IAAgBmC,KAAK,MAEnN,GAAG1G,KAAKkI,KAAKvC,EAAOnG,MAAQ+E,EAAcb,eAAiB,SAE9D,CAAE2D,SAAQC,QACnB,CACA,SAASa,EAAcC,GACrB,IAAIpD,EAAIC,EACR,MAAM,MAAElB,EAAK,OAAE4B,EAAM,cAAEpB,EAAe8D,YAAY,MAAEC,EAAK,UAAEC,KAAcC,GAAmB,CAAC,EAAC,YAAEC,GAAgBL,GAC1G,QAAEM,GAAYnE,EACdoE,EAAa,CACjBC,QAAS,QACTC,UAAW,cACXrJ,MAAOyH,EAActB,EAAQpB,GAC7B9E,OAAQ,OACRqJ,YAAa,GAAG/E,EAAMvE,WAAWuE,EAAMtE,YACpC8E,EAAcX,QAAU,CAAEA,QAAS,GAAGW,EAAcX,aAAgB,SAC1C,YAAzBW,EAAcoB,QAAiD,YAAzBpB,EAAcoB,SAAyBA,EAAOK,WAAaL,EAAOM,YAAc,EAAI,CAAE8C,aAAc,GAAGxE,EAAcZ,aAAgB,QAC5K+E,EAAU,CAAEM,OAAQ,WAAc,QAClCV,GAECW,EAAcP,EAAWQ,IAC7BR,EAAQ,CAAEQ,QAAOnF,QAAO8B,MAAOF,EAAOE,OAAQ,OAC5C,EACEwC,EAAa,CACjBV,IAAK5D,EAAM4D,IACXwB,IAAyB,OAAnBnE,EAAKjB,EAAMoF,KAAenE,EAAK,GACrCoE,MAAOrF,EAAMqF,MACbV,QAASO,EACTX,MAAOK,EACPJ,UAAWrC,EAAK,2BAA4BqC,GAC5Cc,QAAS,OACTC,SAAU,WACPlC,EAAerD,EAAO4B,EAAQpB,MAC9BiE,GAECe,EAAsBC,IAC1B,MAAM,IAAE7B,EAAG,IAAEwB,EAAG,OAAE9B,EAAM,MAAEC,EAAOgB,MAAOmB,KAAmBC,GAASrB,EACpE,OAAOsB,EAAAA,cACL,MACA,CACER,SACG9B,EAAS,CAAEA,SAAQC,SAAU,KAChCK,MACAW,OAAmB,MAAXkB,OAAkB,EAASA,EAAQI,SAAW,CAAEhB,QAAS,QAASpJ,MAAO,OAAQC,OAAQ,QAAWgK,KACzGC,GAEN,EAEGG,EAAe,CAACC,IAAA,IAAC,QAAElB,EAAO,UAAEC,EAAS,MAAErJ,EAAK,YAAEsJ,EAAW,QAAElF,EAAO,aAAEmF,EAAY,OAAEC,GAAQc,EAAA,MAAM,CACpGlB,UACAC,YACArJ,QACAsJ,cACAlF,UACAmF,eACAC,SACA,EARmB,CAQjBL,GACJ,OAAOgB,EAAAA,cAAoBA,EAAAA,SAAgB,KAOpC,OAP2C1E,EAAoB,MAAfwD,OAAsB,EAASA,EAAY,CAChG1E,QACA4B,SACApB,gBACA8D,aACAkB,qBACAM,kBACY5E,EAAKsE,IACrB,CACA,SAASQ,EAAyBC,GAG/B,IAHgC,kBACjCC,EAAiB,SACjBC,GACDF,EACC,OAAOL,EAAAA,cAAoB,MAAO,IAAKM,GAAqBC,EAC9D,CACA,SAASC,EAAqB/B,GAC5B,MAAM,cACJ7D,EAAa,SACb6F,EAAQ,UACRC,EAAS,mBACTC,EACAL,mBAAmB,MAAE3B,EAAK,UAAEC,KAAcgC,GAA0B,CAAC,EAAC,SACtEL,GACE9B,EACE6B,EAAoB,CACxB1B,UAAWrC,EAAK,yBAA0BqC,GAC1CD,MAAO,CACLM,QAAS,OACT4B,cAAe,MACfC,SAAU,SACVC,WAAY,aACZC,eAAgB,mBACbP,EAAWC,EAAY,EAAI,CAAEtB,aAAc,GAAGxE,EAAcZ,aAAgB,QAC5E2E,MAEFiC,GAEL,OAAOZ,EAAAA,cAAoBA,EAAAA,SAAgB,MAA6B,MAAtBW,EAA6BA,EAAqBP,GAA2B,CAC7HxF,gBACA6F,WACAC,YACAJ,oBACAC,aAEJ,CACA,SAASU,EAAWxC,GAClB,MAAM,OACJnE,EAAM,cACNM,EAAa,YACbkE,EAAW,mBACX6B,EACAO,iBAAiB,WAAExC,EAAU,kBAAE4B,IAC7B7B,EACE0C,EAAazG,EAAkB,CAAEJ,SAAQM,kBAC/C,OAAKuG,EACEnB,EAAAA,cAAoBA,EAAAA,SAAgB,KAAMmB,EAAWlF,KAAI,CAACnC,EAAK2G,IAAaT,EAAAA,cACjFQ,EACA,CACEY,IAAK,OAAOX,IACZ7F,gBACA6F,WACAC,UAAWS,EAAWhL,OACtBwK,qBACAL,qBAEFxG,EAAImC,KAAIoF,IAAA,IAAC,MAAEjH,EAAK,OAAE4B,GAAQqF,EAAA,OAAKrB,EAAAA,cAC7BxB,EACA,CACE4C,IAAKhH,EAAMgH,KAAOhH,EAAM4D,IACxB5D,QACA4B,SACApB,gBACAkE,cACAJ,cAEH,QArBqB,IAuB1B,CAqCA,SAAS4C,EAAwBxJ,EAAOyJ,EAAYxJ,EAAWC,GAC7D,OATF,SAAiCwJ,EAAQD,EAAYvJ,GACnD,MAAM+D,EAAO,CAAC/D,GACd,IAAK,IAAI0B,EAAO1B,EAAS7B,EAASoL,EAAYpL,EAAS,EAAGA,GAAU,EAClEuD,EAAO8H,EAAOlI,IAAII,GAAMvD,GAAQuD,KAChCqC,EAAKvE,KAAKkC,GAEZ,OAAOqC,EAAKpC,SACd,CAES8H,CArCT,SAA6B3J,EAAOyJ,EAAYxJ,EAAWC,GACzD,MAAMwJ,EAAyB,IAAItJ,IAC7BK,EAAwB,IAAIH,IAClCG,EAAMS,IAAIjB,GACV,IAAK,IAAI5B,EAAS,EAAGA,EAASoL,EAAYpL,GAAU,EAAG,CACrD,MAAMuL,EAAe,IAAInJ,EAAMoJ,QAC/BpJ,EAAMqJ,QACNF,EAAazI,SAASS,IACpB,MAAMmI,EAAoB1L,EAAS,EAAIqL,EAAOlI,IAAII,GAAMvD,GAAQuC,OAAS,EACzEZ,EAAM4B,GAAMT,SAAQ6I,IAA0B,IAAzB,SAAE3I,EAAQ,OAAET,GAAQoJ,EACnCC,EAAQP,EAAOlI,IAAIH,GAClB4I,IACHA,EAAQ,GACRP,EAAOlJ,IAAIa,EAAU4I,IAEvB,MAAM3I,EAAYyI,EAAoBnJ,EAChCsJ,EAAWD,EAAM5L,EAAS,KAC3B6L,GAAYA,EAAStJ,OAASU,IAAc4I,EAAStJ,OAASU,EAAY,QAAUM,EAAOsI,EAAStI,SACvGqI,EAAM5L,EAAS,GAAK,CAAEuD,OAAMhB,OAAQU,IAElCjD,EAASoL,EAAa,GAAKpI,IAAanB,GAC1CO,EAAMS,IAAIG,EACZ,GACA,GAEN,CACA,OAAOqI,CACT,CAUiCS,CAAoBnK,EAAOyJ,EAAYxJ,EAAWC,GAAUuJ,EAAYvJ,EACzG,CAsBA,SAASkK,EAAiBC,GAQvB,IARwB,KACzBpG,EAAI,OACJzB,EAAM,eACNP,EAAc,YACdqI,EAAW,cACXC,EAAa,QACbrI,EAAO,QACPC,GACDkI,EACC,MAAMG,EAAe,GACfC,EAAaF,EAAcnI,QAAO,CAACsI,EAAOC,IAAgBD,EAAQC,GAAa,GACrF,IAAK,IAAI1L,EAAI,EAAGA,EAAIgF,EAAK5F,OAAS,EAAGY,GAAK,EAAG,CAC3C,MAAM2L,EAASpI,EAAO2B,KAAI,CAAC7B,EAAO8B,KAAU,CAAG9B,QAAO8B,YAAU1B,MAAMuB,EAAKhF,GAAIgF,EAAKhF,EAAI,IAClF4L,EAAoBN,EAAcnI,QACtC,CAACsI,EAAOC,EAAavG,IAAUsG,GAASJ,EAAYrL,GAAKqL,EAAYlG,IAAUuG,GAC/E,GAEIG,GAAe7I,GAAkBgC,EAAK5F,OAAS,GAAK6D,EAAU,GAAK+B,EAAK5F,OAAS,GAAK8D,EAAU0I,GAAqBN,EAActL,GAAKwL,EAC9ID,EAAa9K,KACXkL,EAAOzG,KAAI,CAAA4G,EAAmBxG,KAAU,IAA5B,MAAEjC,EAAK,MAAE8B,GAAO2G,EAAA,MAAkB,CAC5CzI,QACA4B,OAAQ,CACNnG,MAAO+M,EACP9M,OAAQ8M,EAAcjN,EAAMyE,GAC5B8B,QACAG,aACAC,YAAaoG,EAAOvM,QAEvB,IAEL,CACA,OAAOmM,CACT,CACA,SAASQ,EAAmBC,GAIzB,IAJ0B,OAC3BzI,EAAM,cACNM,EAAa,kBACboI,GACDD,EACC,MAAM,QAAE3F,EAAO,QAAEpD,EAAO,QAAEC,EAAO,eAAEF,GAAmBa,EAChDwH,EAAc,GACdC,EAAgB,GACtB,GAAI/H,EAAOnE,QAAUiH,EAAS,CAC5B,MAAM6F,EAAe3I,EAAOnE,OAAS,EAAImE,EAAOJ,QAAO,CAACC,EAAKC,IAAUD,EAAMxE,EAAMyE,IAAQ,GAAKE,EAAOnE,OAAS,EAChH,IAAK,IAAIY,EAAI,EAAGA,EAAIqG,EAASrG,GAAK,EAChCqL,EAAYrL,GAAK,EAAIkD,EACrBoI,EAActL,GAAKA,EAAIuD,EAAOnE,OAASR,EAAM2E,EAAOvD,IAAMkM,EAW5D,MAAO,CAAEb,cAAaC,gBAAeC,aATfJ,EAAkB,CACtCnG,KAAMW,MAAMwG,KAAK,CAAE/M,OAAQiH,EAAU,IAAKnB,KAAI,CAACkH,EAAGjH,IAAU7F,KAAK2E,IAAIkB,EAAO5B,EAAOnE,UACnFmE,SACA+H,gBACAD,cACArI,iBACAC,UACAC,YAGJ,CACA,MAAMmJ,GAAsB9I,EAAOJ,QAAO,CAACC,EAAKC,IAAUD,EAAM6I,EAAoBrN,EAAMyE,IAAQ,GAAKJ,GAAWM,EAAOnE,OAASiH,GAAW,EAAInD,EAAUK,EAAOnE,QAAUiH,EACtKjC,EAhFR,SAA+BkI,GAM5B,IAN6B,OAC9B/I,EAAM,QACNN,EAAO,QACPC,EAAO,kBACP+I,EAAiB,mBACjBI,GACDC,EACC,OAAQ3J,IACN,MAAM6B,EAAU,GACV+H,EAAoC,IAArBF,EACrB,IAAItN,EAASkN,EAAoBrN,EAAM2E,EAAOZ,IAAS,EAAIO,EAC3D,IAAK,IAAIlD,EAAI2C,EAAO,EAAG3C,EAAIuD,EAAOnE,OAAS,IACzCoF,EAAQ/D,KAAK,CAAE2B,SAAUpC,EAAG2B,QAAS0K,EAAqBtN,IAAW,MACjEA,EAASwN,GAAgBvM,IAAMuD,EAAOnE,SAFEY,GAAK,EAKjDjB,GAAUkN,EAAoBrN,EAAM2E,EAAOvD,IAAMiD,EAAU,EAAIC,EAEjE,OAAOsB,CAAO,CAElB,CA4DuBgI,CAAuB,CAC1CjJ,SACA0I,oBACAI,qBACApJ,UACAC,YAEI8B,EAAOuF,EAAwBnG,EAAciC,EAAS,EAAG9C,EAAOnE,QACtE,IAAK,IAAIY,EAAI,EAAGA,EAAIgF,EAAK5F,OAAS,EAAGY,GAAK,EAAG,CAC3C,MAAM2L,EAASpI,EAAOE,MAAMuB,EAAKhF,GAAIgF,EAAKhF,EAAI,IAC9CqL,EAAYrL,GAAKiD,GAAW0I,EAAOvM,OAAS,GAAK,EAAI8D,EAAUyI,EAAOvM,OACtEkM,EAActL,GAAK,EAAI2L,EAAOxI,QAAO,CAACC,EAAKC,IAAUD,EAAM,EAAIxE,EAAMyE,IAAQ,EAC/E,CAUA,MAAO,CAAEgI,cAAaC,gBAAeC,aAThBJ,EAAkB,CACrCnG,OACAzB,SACA+H,gBACAD,cACArI,iBACAC,UACAC,YAGJ,CACA,SAASuJ,EAAc/E,GACrB,MAAM,OAAEnE,EAAM,cAAEM,GAAkB6D,GAC5B,QAAErB,EAAO,QAAEpD,EAAO,QAAEC,EAAO,eAAEF,GAAmBa,EAChDoI,GAAqBjJ,EAAiBC,GAAWoD,EAAU,GAAK,EAAInD,EAAUmD,GAAWA,GACzF,YAAEgF,EAAW,cAAEC,EAAa,aAAEC,GAAiBQ,EAAoB,CACvExI,SACAM,gBACAoI,sBAEF,OAAIV,EAAamB,WACdC,GAAgBA,EAAYD,WAAUE,IAAA,IAAG3H,QAAQ,MAAEnG,EAAK,OAAEC,IAAU6N,EAAA,OAAK9N,EAAQ,GAAKC,EAAS,CAAC,KAAK,KACnG,EACCsH,EAAU,EACLoG,EAAc,CAAElJ,SAAQM,cAAe,IAAKA,EAAewC,QAASA,EAAU,UAEvF,EAEK,CAAEkF,eAAcF,cAAaC,gBACtC,CACA,SAASuB,EAAoBC,GAG1B,IAH2B,OAC5BvJ,EAAM,cACNM,GACDiJ,EACC,OAAOL,EAAc,CAAElJ,SAAQM,iBACjC,CACA,SAASkJ,EAA4BC,GAGlC,IAHmC,qBACpCC,EAAoB,SACpBzD,GACDwD,EACC,OAAO/D,EAAAA,cAAoB,MAAO,IAAKgE,GAAwBzD,EACjE,CACA,SAAS0D,EAAexF,GACtB,MAAM,cAAE7D,EAAa,YAAEsJ,EAAW,aAAEC,EAAY,YAAE/B,EAAW,cAAEC,GAAkB5D,GAC3E,OAAEzC,EAAM,QAAEhC,EAAO,QAAEC,GAAYW,EACrC,GAAe,YAAXoB,IAAyBoG,IAAgBC,EAC3C,MAAO,gBAAgBrI,GAAWmK,EAAe,WAAWA,KAE9D,MAAM5B,EAAaF,EAAcnI,QAAO,CAACC,EAAKiK,IAAWjK,EAAMiK,GAAQ,GAKvE,MAAO,gBAAgBrO,GACpBoO,EAAe,GAAKnK,EAAU,EAAImK,EAAelK,EAL1BoI,EAAcnI,QACtC,CAACC,EAAKiK,EAAQlI,IAAU/B,GAAOiI,EAAY8B,GAAe9B,EAAYlG,IAAUkI,GAChF,GAIA,WACQrO,EAAMsM,EAAc6B,GAAe3B,EAAY,QAAQ,EAAItI,MACvE,CACA,SAASoK,EAAwB5F,GAC/B,MAAM,cACJ7D,EAAa,sBACb0J,EAAqB,SACrB/D,EACAyD,sBAAsB,MAAErF,EAAK,UAAEC,KAAc2F,GAA6B,CAAC,KACxExE,GACDtB,EACEuF,EAAuB,CAC3BpF,UAAWrC,EAAK,4BAA6BqC,GAC7CD,MAAO,CACLM,QAAS,OACT4B,cAAe,SACfC,SAAU,SACVC,WAAY,aACZlL,MAAOoO,EAAexF,GACtBuC,eAAyC,YAAzBpG,EAAcoB,OAAuB,gBAAkB,gBACpE2C,MAEF4F,GAEL,OAAOvE,EAAAA,cAAoBA,EAAAA,SAAgB,MAAgC,MAAzBsE,EAAgCA,EAAwBR,GAA8B,CACtIlJ,gBACAoJ,uBACAzD,cACGR,IAEP,CACA,SAASyE,EAAc/F,GACrB,MAAM,OACJnE,EAAM,cACNM,EAAa,YACbkE,EAAW,sBACXwF,EACApD,iBAAiB,WAAExC,EAAU,qBAAEsF,IAC7BvF,EACEgG,EAAgBb,EAAqB,CAAEtJ,SAAQM,kBACrD,IAAK6J,EAAe,OAAO,KAC3B,MAAM,aAAEnC,EAAY,cAAED,EAAa,YAAED,GAAgBqC,EACrD,OAAOzE,EAAAA,cAAoBA,EAAAA,SAAgB,KAAMsC,EAAarG,KAAI,CAACyG,EAAQwB,IAAgBlE,EAAAA,cACzFqE,EACA,CACEjD,IAAK,UAAU8C,IACftJ,gBACAsJ,cACAC,aAAc7B,EAAanM,OAC3BiM,cACAC,gBACAiC,wBACAN,wBAEFtB,EAAOzG,KAAIyI,IAAA,IAAC,MAAEtK,EAAK,OAAE4B,GAAQ0I,EAAA,OAAK1E,EAAAA,cAChCxB,EACA,CACE4C,IAAKhH,EAAMgH,KAAOhH,EAAM4D,IACxB5D,QACA4B,SACApB,gBACAkE,cACAJ,cAEH,OAEL,CACA,SAASiG,EAAqBlG,GAC5B,MAAM,OAAEnE,EAAM,cAAEM,GAAkB6D,GAC5B,QAAErB,EAAO,QAAEpD,EAAO,QAAEC,EAAO,eAAEF,GAAmBa,EAChDgI,GAAe7I,EAAiBC,GAAWoD,EAAU,GAAK,EAAInD,EAAUmD,GAAWA,EACzF,GAAIwF,GAAe,EACjB,OAAOxF,EAAU,EAAIuH,EAAqB,IACrClG,EACH7D,cAAe,IAAKA,EAAewC,QAASA,EAAU,UACnD,EAEP,MAAMwH,EAA6B,GACnC,IAAK,IAAI7N,EAAI,EAAGA,EAAIqG,EAASrG,GAAK,EAChC6N,EAA2B7N,GAAK,EAclC,OAZqBuD,EAAOJ,QAC1B,CAAC2K,EAAOzK,EAAO8B,KACb,MAAM4I,EAAiBF,EAA2B1K,QAChD,CAAC6K,EAAuBC,EAAMjO,IAAMiO,EAAOJ,EAA2BG,GAAyB,EAAIhO,EAAIgO,GACvG,GAIF,OAFAH,EAA2BE,GAAkBF,EAA2BE,GAAkBlC,EAAcjN,EAAMyE,GAASJ,EAAU,EAAIC,EACrI4K,EAAMC,GAAgBtN,KAAK,CAAE4C,QAAO8B,UAC7B2I,CAAK,GAEdnI,MAAMwG,KAAK,CAAE/M,OAAQiH,IAAWnB,KAAI,IAAM,MAExBA,KACjByG,GAAWA,EAAOzG,KAAI,CAAAgJ,EAAmB5I,KAAU,IAA5B,MAAEjC,EAAK,MAAE8B,GAAO+I,EAAA,MAAkB,CACxD7K,QACA4B,OAAQ,CACNnG,MAAO+M,EACP9M,OAAQ8M,EAAcjN,EAAMyE,GAC5B8B,QACAG,aACAC,YAAaoG,EAAOvM,QAEvB,KAEL,CACA,SAAS+O,EAAczG,GACrB,MAAM,OACJnE,EAAM,cACNM,EAAa,YACbkE,EAAW,sBACXwF,EACApD,iBAAiB,WAAExC,EAAU,qBAAEsF,IAC7BvF,EACE0G,EAAgBR,EAAqB,CAAErK,SAAQM,kBACrD,OAAKuK,EACEnF,EAAAA,cAAoBA,EAAAA,SAAgB,KAAMmF,EAAclJ,KAAI,CAACyG,EAAQwB,IAAgBlE,EAAAA,cAC1FqE,EACA,CACEjD,IAAK,kBAAkB8C,IACvBtJ,gBACAuJ,aAAcgB,EAAchP,OAC5B+N,cACAI,wBACAN,wBAEFtB,EAAOzG,KAAImJ,IAAA,IAAC,MAAEhL,EAAK,OAAE4B,GAAQoJ,EAAA,OAAKpF,EAAAA,cAChCxB,EACA,CACE4C,IAAKhH,EAAMgH,KAAOhH,EAAM4D,IACxB5D,QACA4B,SACApB,gBACAkE,cACAJ,cAEH,QArBwB,IAuB7B,CACA,SAAS2G,EAAsBC,GAA6C,IAA5C,eAAEC,EAAc,SAAEhF,EAAQ,aAAEiF,GAAcF,EACxE,OAAOtF,EAAAA,cAAoB,MAAO,CAAEyF,IAAKD,KAAiBD,GAAkBhF,EAC9E,CACA,SAASmF,EAAkBjH,GACzB,MAAM,OACJzC,EAAM,gBACN2J,EAAe,SACfpF,EAAQ,aACRiF,EACAD,gBAAgB,MAAE5G,EAAK,UAAEC,KAAcgH,GAAuB,CAAC,GAC7DnH,EACE8G,EAAiB,CACrB3G,UAAWrC,EAAK,oBAAqB,sBAAsBP,IAAU4C,GACrED,MAAO,CACLM,QAAS,OACT6B,SAAU,SACVE,eAAgB,gBAChBH,cAA0B,SAAX7E,EAAoB,SAAW,SAC3C2C,MAEFiH,GAEL,OAAO5F,EAAAA,cAAoBA,EAAAA,SAAgB,MAA0B,MAAnB2F,EAA0BA,EAAkBN,GAAwB,CACpHE,iBACAC,eACAxJ,SACAuE,aAEJ,CAQA,SAASsF,EAAsBC,EAAKC,GAA4C,IAA1C,kBAAEC,EAAiB,kBAAEC,GAAmBF,EAC5E,MAAM,eAAEhM,EAAc,eAAEmM,GAAmBJ,EAC3C,YAAuB,IAAnB/L,QAAgD,IAAnBmM,QAAmD,IAAtBF,QAAsD,IAAtBC,GAAgCD,EAAoBjM,GAAkBiM,EAAoBjM,GAAkB,IAAMkM,EAAoBC,EAC3N,CAAEnM,iBAAgBmM,eAAgBD,GAEpClM,IAAmBiM,GAAqBE,IAAmBD,EAAoB,CAAElM,eAAgBiM,EAAmBE,eAAgBD,GAAsBH,CACnK,CACA,SAASK,EAAsB1N,EAAI2N,GACjC,IAAIvQ,EAAc,MAAN4C,OAAa,EAASA,EAAG4N,YACrC,QAAc,IAAVxQ,GAAoBuQ,GAAgBA,EAAajQ,OAAS,EAAG,CAC/D,MAAMmQ,EAAS,IAAIF,EAAaxJ,QAAQ2J,GAAMA,EAAI,KAAItI,MAAK,CAACtF,EAAGC,IAAMA,EAAID,IACzE2N,EAAO9O,KAAKnB,KAAKiB,MAAMgP,EAAOA,EAAOnQ,OAAS,GAAK,IACnD,MAAMqQ,EAAY3Q,EAClBA,EAAQyQ,EAAOxI,MAAK,CAAC2I,EAAYvK,IAAUuK,GAAcD,GAAatK,IAAUoK,EAAOnQ,OAAS,GAClG,CACA,OAAON,CACT,CA2BA,MAAM6Q,EAAcC,OAAOC,OAAO,CAAC,KAAM,IAAK,IAAK,IACnD,SAASC,EAAO7Q,EAAO8Q,GACrB,MAAwB,oBAAV9Q,EAAuBA,EAAM8Q,GAAO9Q,CACpD,CACA,SAAS+Q,EAAgB/Q,EAAO+D,GAC9B,MAAwB,qBAAV/D,EAAwB6Q,EAAO7Q,EAAO+D,QAAkB,CACxE,CAKA,SAASiN,EAA2BC,EAAWlN,EAAgBmN,GAAsB,IAAdC,EAAQjR,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,EAChF,MAAMF,EAAQ+Q,EAAgBE,EAAWlN,GACzC,OAAO1D,KAAKN,MAAMM,KAAKsB,SAAc,IAAV3B,EAN7B,SAA+BkR,EAAQnN,GACrC,MAAMmC,EAAQwK,EAAYjD,WAAWgD,GAAeA,GAAc1M,IAClE,OAAO8M,EAAOK,EAAOhL,GAAS,EAAIA,EAAQ,GAAInC,EAChD,CAGgDqN,CAAsBF,EAAQnN,GAAkB/D,EAAOmR,GACvG,CAoFA,SAASE,EAAW5I,GAClB,MAAM,OAAEnE,EAAM,OAAE0B,EAAM,gBAAE2J,EAAe,sBAAE2B,EAAuBZ,YAAaN,GAAiB3H,GACxF,aAAE+G,EAAY,eAAEzL,GA9HxB,SAA2BqM,EAAckB,GACvC,OAAO,eAAEvN,GAAkBwN,GAAYvH,EAAAA,WAAiB6F,EAAuB,CAC7E9L,eAAgBuN,IAEZ7B,EAAMzF,EAAAA,OAAa,MACnBwH,EAAcxH,EAAAA,SAmBpB,MAAO,CAAEwF,aAlBYxF,EAAAA,aAClBtG,IACC,IAAI2B,EAC0B,OAA7BA,EAAKmM,EAAYC,UAA4BpM,EAAGqM,aACjDF,EAAYC,aAAU,EACtBhC,EAAIgC,QAAU/N,EACd,MAAMiO,EAAcA,IAAMJ,EAAS,CACjCvB,kBAAmBG,EAAsBV,EAAIgC,QAASrB,GACtDH,kBAAmB2B,OAAOC,WAAaC,SAASC,gBAAgB1B,cAElEsB,IACIjO,GAAkC,qBAAnBsO,iBACjBR,EAAYC,QAAU,IAAIO,eAAeL,GACzCH,EAAYC,QAAQQ,QAAQvO,GAC9B,GAEF,CAAC0M,IAEoBrM,iBACzB,CAqG2CmO,CAtJ3C,SAAkBC,GAChB,MAAM1C,EAAMzF,EAAAA,OAAamI,GAIzB,OAHKA,GAAU1C,EAAIgC,SAAWU,EAAMpL,SAAW0I,EAAIgC,QAAQ1K,SACzD0I,EAAIgC,QAAUU,GAET1C,EAAIgC,OACb,CAgJ6DW,CAAShC,GAAekB,GACnF,IAAKtL,IAAW,CAAC,OAAQ,UAAW,WAAWqM,SAASrM,KAAYU,MAAM4L,QAAQhO,GAAS,OAAO,KAClG,MAAMM,EAAgBb,EAvFxB,SAA6BwO,GAU1B,IAV2B,OAC5BvM,EAAM,QACN+C,EAAO,eACPhF,EAAc,gBACdQ,EAAe,eACfM,EAAc,QACduC,EAAO,QACPpD,EAAO,QACPC,EAAO,MACP0D,GACD4K,EACC,MAAO,CACLvM,SACA+C,UACAhF,iBACAqD,QAAS4J,EAA2B5J,EAASrD,EAAgB,CAAC,EAAG,EAAG,EAAG,GAAI,GAC3EC,QAASgN,EAA2BhN,EAASD,EAAgB,CAAC,GAAI,GAAI,GAAI,IAC1EE,QAAS+M,EAA2B/M,EAASF,EAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,IAC1EQ,gBAAiByM,EAA2BzM,EAAiBR,EAAgB,CAC1EyO,GAAMA,EAAI,EACVA,GAAMA,EAAI,EACVA,GAAMA,EAAI,EACVA,GAAMA,EAAI,IAEb3N,eAAgBkM,EAAgBlM,EAAgBd,GAChD4D,QAEJ,CA4DyC8K,CAAqB,CAAE1O,oBAAmB0E,SAAW,EACtFyC,EA5DR,SAAgCzC,EAAO1E,EAAgBa,GACrD,MAAM,OAAEN,EAAQ4G,gBAAiBwH,GAAwBjK,EACnDyC,EAAkB2F,EAAO6B,EAAqB3O,IAAmB,CAAC,EACxE,GAAIa,EAAe,CACjB,MAAM,OAAEoB,EAAM,QAAEhC,EAAO,QAAEC,EAAO,eAAEY,GAAmBD,EACrD,GAAe,SAAXoB,EAAmB,CACrB,MAAM,mBAAE2M,GAAuB9N,GAAkB,CAAC,EAClD,GAAI8N,EAAoB,CACtB,MAAMC,EAAWvS,KAAKiB,MACpBgD,EAAOJ,QACL,CAACC,EAAG0O,KAAA,IAAE,MAAEhT,EAAK,OAAEC,GAAQ+S,EAAA,OAAK1O,EAAMtE,EAAQC,EAAS6S,EAAqB,EAAI1O,CAAO,GACnFA,EAAUK,EAAOnE,OAAS,EAAI6D,GAAWM,EAAOnE,OAAS,KAGzDyS,EAAW,IACb1H,EAAgBqE,eAAiBrE,EAAgBqE,gBAAkB,CAAC,EACpErE,EAAgBqE,eAAe5G,MAAQ,CAAEiK,cAAa1H,EAAgBqE,eAAe5G,OAEzF,CACF,CACF,CACA,OAAOuC,CACT,CAsC0B4H,CAAuBrK,EAAO1E,EAAgBa,GACtE,OAAOoF,EAAAA,cACL0F,EACA,CACE1J,SACAwJ,eACAG,kBACAJ,eAAgBrE,EAAgBqE,gBAElC3K,GA9CJ,SAAsB6D,EAAOyC,EAAiBtG,GAC5C,MAAM,OAAEN,EAAM,OAAE0B,EAAM,YAAE8C,EAAW,mBAAE6B,EAAkB,sBAAE2D,GAA0B7F,EAC7EsK,EAAoB,CAAEzO,SAAQwE,cAAaoC,mBACjD,MAAe,SAAXlF,EACKgE,EAAAA,cACLiB,EACA,CACErG,gBACA+F,wBACGoI,IAIM,YAAX/M,EACKgE,EAAAA,cACLwE,EACA,CACE5J,gBACA0J,2BACGyE,IAIF/I,EAAAA,cACLkF,EACA,CACEtK,gBACA0J,2BACGyE,GAGT,CAeqBC,CAAavK,EAAOyC,EAAiBtG,GAE1D,C,s5BCrzBA,SAASqO,GAAArT,GAA8B,IAAjBsT,QAAEC,EAAOC,KAAEC,EAAIC,QAAEC,GAAA3T,EACrC,MACE4T,SAASC,YAAE5S,KACT8B,EAAAA,GAAAA,MACE+Q,aAAEC,IAAiBC,EAAAA,GAAAA,MACnBC,mBAAEC,IAAuBC,EAAAA,GAAAA,IAC7BhP,IAAA,IAAGyO,SAAWK,mBAAAG,IAAAjP,EAAA,MAA4B,CACxC8O,mBAAAG,EAAA,KAGEC,2BAAEjT,IAA+BD,EAAAA,GAAAA,IAAUiT,IAAA,CAC/CC,2BAA4BD,EAAMR,QAAQS,+BAGtCC,GAAWC,EAAAA,EAAAA,KAAYC,UAC3Bb,IACA,UACQ1S,EAAYsS,GAClBW,EAAmB,CAAEjR,GAAIsQ,IACzBnS,EAA2B,CAAE6B,GAAIsQ,GAClC,CAAC,MAAOa,IACPK,EAAAA,EAAAA,IAAW,uBAAwBL,EAAIM,SACvCX,EAAa,CACXW,SAASC,EAAAA,EAAAA,IAAG,+BAAgC,eAC5CC,aAAA,GAEJ,IACC,CACD3T,EACAiT,EACA9S,EACAmS,EACAI,EACAI,IAGIc,GAAmBF,EAAAA,EAAAA,IAAG,gBAAiB,eACvCG,GAAmBH,EAAAA,EAAAA,IAAG,gBAAiB,eACvCI,GAAyBJ,EAAAA,EAAAA,IAC7B,2HACA,eAEI3R,GAAyB2R,EAAAA,EAAAA,IAC7B,2HACA,eAIF,OACEP,EAAAA,cAACY,GAAAA,EAAM,CACLC,QAAA,EACAvB,QAASC,EACT9J,MAAgB,UAAT4J,EAAmBoB,EAAmBC,EAC7CI,eAAeP,EAAAA,EAAAA,IAAG,SAAU,eAC5BQ,UAAWb,EACXc,aAAaT,EAAAA,EAAAA,IAAG,SAAU,eAC1B3B,SAAU,KAEVoB,EAAAA,cAACiB,GAAAA,EAAKC,UAAS,CAACtT,KAAMuT,GAAAA,EAASC,OACnB,UAAT/B,EAAmBsB,EAAyB/R,GAE/CoR,EAAAA,cAACiB,GAAAA,EAAKC,UAAS,CAACtT,KAAMuT,GAAAA,EAASC,MAAOC,QAAA,IACnCd,EAAAA,EAAAA,IAAG,iCAAkC,gBAI9C,C,mDCjEA,MAEML,IAAuBG,EAAAA,EAAAA,IAAG,gDAFR,KAQlBK,GAAQP,EAAAA,GAAOmB,IAAGC,WAAA,CAAAC,YAAA,yBAAAC,YAAA,eAAVtB,CAAU,QACpBD,IAGES,GAAQR,EAAAA,GAAOuB,MAAKH,WAAA,CAAAC,YAAA,yBAAAC,YAAA,eAAZtB,CAAY,QACtBD,IAGEO,GAAaN,EAAAA,GAAOwB,IAAGJ,WAAA,CAAAC,YAAA,8BAAAC,YAAA,eAAVtB,CAIlB,+DAEK5D,GAAwB4D,EAAAA,GAAOwB,IAAGJ,WAAA,CAAAC,YAAA,yCAAAC,YAAA,eAAVtB,CAI7B,sDAEKyB,IAAWzB,EAAAA,EAAAA,IAAOd,GAAAA,EAAKwC,MAAKN,WAAA,CAAAC,YAAA,4BAAAC,YAAA,eAAjBtB,CAEhB,wBAEK3B,IAAoB2B,EAAAA,EAAAA,IAAOS,GAAAA,GAASW,WAAA,CAAAC,YAAA,qCAAAC,YAAA,eAAhBtB,CAEzB,wBAEKvR,IAAmB2R,EAAAA,EAAAA,IAAG,aAAc,eACpCuB,IAAmBvB,EAAAA,EAAAA,IAAG,aAAc,eACpCpH,IAAkBoH,EAAAA,EAAAA,IAAG,iBAAkB,eACvCwB,IAAkBxB,EAAAA,EAAAA,IAAG,oBAAqB,eAC1CyB,IAAyBzB,EAAAA,EAAAA,IAC7B,oGACA,eAEI0B,IAAyB1B,EAAAA,EAAAA,IAC7B,mFACA,eAWF,SAAS2B,GAAAtW,GAA4B,IAAZuW,SAAEhC,EAAQb,QAAEe,GAAAzU,EACnC,MAAMiD,GAAE+R,EAAE5M,IAAEkM,EAAGkC,aAAEhV,EAAYvB,MAAEwW,EAAKvW,OAAEwW,EAAMlD,KAAEmD,EAAI/M,IAAEgN,EAAGC,OAAEC,EAAMC,SAAEC,GAC/DzC,GAEAX,SAASqD,YAAEC,KACTnD,EAAAA,GAAAA,MACEoD,mBAAEC,IAAuBlD,EAAAA,GAAAA,IAC7B/O,IAAA,IAAGyO,SAAWuD,mBAAA/C,IAAAjP,EAAA,MAA4B,CACxCgS,mBAAA/C,EAAA,KAGEN,aAAEuD,IAAiBpW,EAAAA,GAAAA,MAClBqW,EAASC,IAAcvD,EAAAA,EAAAA,IAAS4C,GACjCY,GAAazU,EAAAA,GAAAA,IAAOvB,GAEpBiW,GAAsBpC,EAAAA,EAAAA,KAAajB,IACvCmD,EAAWnD,EAAIsD,OAAOtX,MAAM,GAC3B,IAEGuX,GAAkBtC,EAAAA,EAAAA,KAAYb,UAClC,UAEQ0C,EAAYlC,EAAI,CAAE4C,QAAAN,IAExBF,EAAmB,CAAEnU,GAAA+R,EAAI6C,KAAM,CAAEjO,IAAK0N,KACtC7C,GACD,CAAC,MAAOL,IACPD,EAAAA,EAAAA,IAAW,mBAAoBC,EAAIM,SACnC2C,EAAa,CACX3C,SAASC,EAAAA,EAAAA,IAAG,sCAAuC,eACnDC,aAAA,GAEJ,IACC,CAAC0C,EAAStC,EAAIP,EAAS4C,EAAcH,EAAaE,IAE/CU,EAAmB,UAATnB,EAEhB,OACEvC,EAAAA,cAAChT,GAAAA,EAAM,CACL6T,QAAA,EACAvB,QAASe,EACT5K,MAAOiO,EAAU9U,GAAmBkT,GACpChB,eAAeP,EAAAA,EAAAA,IAAG,SAAU,eAC5BQ,UAAWwC,EACXvC,aAAaT,EAAAA,EAAAA,IAAG,OAAQ,gBAExBP,EAAAA,cAACS,GACE,KAAS,UAAT8B,EACCvC,EAAAA,cAACU,GAAK,CACJ1M,KAAKmL,EAAAA,GAAAA,GA1GO,IA0GiCgB,GAC7C3K,IAAKgN,EACL9M,QAAS,OACTiO,YAAY,YACZhO,SAAS,UAGXqK,EAAAA,cAACW,GAAK,CACJvJ,IAAK8I,EACLyD,YAAY,YACZlB,OAAQC,EACRkB,QAAQ,WACRC,OAAA,GAEA7D,EAAAA,cAAA,UAAQhM,IAAKkM,EAAKd,KAAMwD,KAG5B5C,EAAAA,cAACzD,GAAqB,MACnBxP,EAAAA,GAAAA,IAAQqW,IACPpD,EAAAA,cAAC4B,GAAQ,CAAChU,KAAM2R,GAAAA,EAASuE,SACtBC,EAAAA,GAAAA,IAECxD,EAAAA,EAAAA,IAAG,eAAgB,gBACnBY,EAAAA,GAAAA,IAAW/T,KAIjB4S,EAAAA,cAACX,GAAAA,EAAKwC,KAAI,CAACjU,KAAM2R,GAAAA,EAAS6B,QACvB2C,EAAAA,GAAAA,IAECxD,EAAAA,EAAAA,IAAG,qBAAsB,eACzB8B,EACAC,IAGJtC,EAAAA,cAACxB,GAAiB,CAChBxS,MAAOkX,EACP,aAAYQ,EAAUvK,GAAkB4I,GACxC3C,KAAK,OACL4E,YAAaN,EAAUvK,GAAkB4I,GACzCkC,SAAUZ,IAEZrD,EAAAA,cAACX,GAAAA,EAAK6B,UAAS,CAACtT,KAAM2R,GAAAA,EAAS6B,OAC5BsC,EAAU1B,GAAyBC,MAMhD,CCxJA,MAAMvB,IAAaP,EAAAA,EAAAA,IAAOR,GAAAA,IAAa4B,WAAA,CAAAC,YAAA,2BAAAC,YAAA,gBAApBtB,CAGlB,wBAEKM,GAAoBN,EAAAA,GAAOwB,IAAGJ,WAAA,CAAAC,YAAA,kCAAAC,YAAA,gBAAVtB,CAEzB,sBAEKQ,GAAgBR,EAAAA,GAAOwB,IAAGJ,WAAA,CAAAC,YAAA,8BAAAC,YAAA,gBAAVtB,CAErB,gBAEK5D,IAAqB8D,EAAAA,EAAAA,IAM1B,qDAEKuB,GACE,OADFpD,GAEI,SAgBV,SAAS0F,GAAAtY,GAOW,IAPEuW,SACpBhC,EAAQlL,QACRoL,EAAO8D,WACPxE,EAAUyE,WACV9B,EAAU+B,gBACVtC,EAAeuC,eACfxC,EAAcyC,gBACdtC,EAAkBlC,EAAAA,GAAAnU,EAElB,MAAMgD,EAAS,CACb,CACEiH,QAAS,CACP,CACE2O,OAAOjE,EAAAA,EAAAA,IAAG,iBAAkB,eAC5BvU,MAAO4V,IAET,CACE4C,OAAOjE,EAAAA,EAAAA,IAAG,sBAAuB,eACjCvU,MAAOwS,QAMRwD,EAAkBK,IAAuBzC,EAAAA,EAAAA,KAAA,IACzCxS,EAAgBsV,IAAqB9C,EAAAA,EAAAA,KAAA,GACtC2C,GAAgBtB,EAAAA,EAAAA,MAEhB2B,GAAUzB,EAAAA,EAAAA,KAAY,KAC1BY,IACAQ,EAAc9E,SAASgH,QAGvBxC,GAAiB,GAChB,CAACF,EAAiBE,KAEfyC,qBAAE5B,IAAyBvD,EAAAA,GAAAA,IAC/BxO,IAAA,IAAG+K,OAAS4I,qBAAA1E,IAAAjP,EAAA,MAA8B,CACxC2T,qBAAA1E,EAAA,IAmBE7G,GAAsBgI,EAAAA,EAAAA,KAAY,KACtCkB,GAAA,GACAO,GAAS,GACR,CAACP,EAAqBO,IAGnBJ,GAAoBrB,EAAAA,EAAAA,KAAY,KACpCuB,GAAA,GACAE,GAAS,GACR,CAACF,EAAmBE,IAEjBQ,GAASzU,EAAAA,EAAAA,KAAQ,IAAM,SAAQ5B,EAAAA,EAAAA,QAAY,IAC3C4X,GAAWhW,EAAAA,EAAAA,KAAQ,IAAM,WAAU5B,EAAAA,EAAAA,QAAY,IAGrD,OACE+V,EAAqB3C,IACnBH,EAAAA,cAACW,GACE,KAAA4B,EAAc9E,SACbuC,EAAAA,cAACF,GAAAA,EAAiB,CAACwD,OAAQf,EAAc9E,UAE3CuC,EAAAA,cAACU,GAAU,CACTjF,IAAK8G,EACLxN,QAASuN,EACT,cAAY/B,EAAAA,EAAAA,IAAG,OAAQ,eACvB,eAAcZ,EACd,mBACA,gBAAeA,EACf,YAAWA,EAAayD,EAAS,KACjCvU,GAAI8V,EACJC,SAAUvE,EACVwE,SAAUxE,GAAWV,EAAa,GAAK,GAEvCK,EAAAA,cAACY,EAAAA,EAAM,QAEPP,GAAWV,IACXK,EAAAA,cAACb,EAAAA,EAAK,CACJ2F,OAAQvC,EACRwC,UAAWlY,EAAAA,EAAUmY,YACrBnE,OAAQlB,GAERK,EAAAA,cAACS,GAAA,KACCT,EAAAA,cAACX,EAAAA,EAAI,CACH4F,SAAUN,EACVO,OAAQ9B,EACR+B,qBA5DaA,CAACnF,EAAKG,KAE/B,OADA2B,IACQ3B,GACN,KAAKyB,GACHc,GAAA,GACA,MACF,KAAKlE,GACH6D,GAAA,GAAoB,EAsDZ+C,OAAQxW,EACRyW,cAAezC,EACf0C,aAAA,EACAC,mBAAoBhJ,OAK3ByF,GACChC,EAAAA,cAAChT,GAAY,CACXkS,QAASiB,EAAStR,GAClBuQ,KAAMe,EAASf,KACfE,QAASnG,IAGZ/L,GACC4S,EAAAA,cAACE,GAAe,CAACiC,SAAUhC,EAAUb,QAASkD,IAKxD,C,uCCxLA,MAAM7T,IAAaqR,EAAAA,EAAAA,IAAOjT,GAAAA,EAAK8U,MAAKN,WAAA,CAAAC,YAAA,0BAAAC,YAAA,eAAjBzB,CAAiB,gBACzBpU,IAAA,IAAG4Z,MAAA5F,EAAO6F,OAAAzF,GAAApU,EAAA,OACjByU,EAAAA,EAAAA,IAAKT,EAAM8F,OAAOC,SAASC,MAAO5F,EAAS,EAAM,OAG/CT,GAAOS,EAAAA,GAAOrR,EAAC4S,WAAA,CAAAC,YAAA,oBAAAC,YAAA,eAARzB,CAAQ,iLAOCjP,IAAA,IAAGyU,MAAA5F,EAAO6F,OAAAzF,GAAAjP,EAAA,OAC5BsP,EAAAA,EAAAA,IAAKT,EAAM8F,OAAOG,GAAGC,QAAS9F,EAAS,GAAM,OAO3C+F,GAAc3U,IAAW,IAAR4U,OAAAhG,EAAQiG,IAAA5F,GAAAjP,EAC7B,MAAOrE,EAAQkU,IAAad,EAAAA,EAAAA,KAAA,GACtBd,EAAaA,IAAM4B,GAAA,GACnB9B,EAAeA,IAAM8B,GAAA,GAE3B,OACErB,EAAAA,cAACL,GAAI,CACH9J,MAAOuK,EACPyF,OAAQ1Y,EACRmZ,eAAgB7G,EAChB8G,QAAS9G,EACT+G,eAAgBjH,EAChBkH,OAAQlH,EACRmH,KAAMjG,EACNiD,OAAO,SACPiD,IAAI,cAEJ3G,EAAAA,cAACjR,GAAU,CAACf,KAAMf,GAAAA,EAASiX,QAAS9D,GAC/B,E,uSC3BX,MAAM4B,IAAcvB,EAAAA,EAAAA,IASnB,qHAEKK,GAAQP,EAAAA,GAAOmB,IAAGC,WAAA,CAAAC,YAAA,sBAAAC,YAAA,eAAVtB,CAAU,QACpByB,IAIEjB,GAAQR,EAAAA,GAAOuB,MAAKH,WAAA,CAAAC,YAAA,sBAAAC,YAAA,eAAZtB,CACV,YAAAyB,IACAhW,IAAA,IAAG4a,iBAAAxG,GAAApU,EAAA,OAAwBoU,EAAmB,cAAgB,MAG5DE,GAAkBC,EAAAA,GAAOwB,IAAGJ,WAAA,CAAAC,YAAA,gCAAAC,YAAA,eAAVtB,CAAU,yGAIlBpP,IAAA,IAAGyU,MAAAxF,GAAAjP,EAAA,OAAYiP,EAAM0F,OAAOe,QAAQC,OAAA,IAK9CjG,GAAcN,EAAAA,GAAOwB,IAAGJ,WAAA,CAAAC,YAAA,4BAAAC,YAAA,eAAVtB,CAAU,iHAMd/O,IAAA,IAAGoU,MAAAxF,GAAA5O,EAAA,OAAY4O,EAAM0F,OAAOe,QAAQC,OAAA,IACzC/V,IAAA,IAAG6U,MAAAxF,GAAArP,EAAA,OAAYqP,EAAM0F,OAAOiB,GAAGb,OAAA,IAGpChE,IAAW3B,EAAAA,EAAAA,IAAOtT,GAAAA,EAAKgV,MAAM+E,MAAM,CACvChZ,KAAMyR,GAAAA,EAASyE,SACfvC,WAAA,CAAAC,YAAA,yBAAAC,YAAA,eAFetB,CAEf,8BACShO,IAAA,IAAGqT,MAAAxF,GAAA7N,EAAA,OAAY6N,EAAM0F,OAAOiB,GAAGb,OAAA,IAIpC1Y,GAAW+S,EAAAA,GAAOmB,IAAGC,WAAA,CAAAC,YAAA,yBAAAC,YAAA,eAAVtB,CAAU,uDAEhB/N,IAAA,IAAGvG,MAAAmU,GAAA5N,EAAA,MAAY,GAAG4N,KAAA,IACjBjM,IAAA,IAAGjI,OAAAkU,GAAAjM,EAAA,MAAa,GAAGiM,KAAA,IA0N/B,IAAepR,IAAAgR,EAAAA,EAAAA,KAtNf,SAASvL,GAYP,IAZoB+K,KACpBe,EAAInM,IACJqM,EAAG8B,SACHvC,EAAQpK,IACR3I,EAAGhB,MACHwT,EAAKvT,OACL8V,EAAM7M,QACNnG,EAAOiY,OACPrI,EAASoC,EAAAA,EAAIkG,gBACb7E,EAAe8E,aACfxK,EAAYkJ,OACZzD,EAAMgF,QACNzE,GAAAlO,EAEA,MAAM8E,GAAoB8H,EAAAA,EAAAA,IAAO,MAE3Bc,GAAwBd,EAAAA,EAAAA,IAAO,OAI/BgG,WAAE5E,EAAU6E,WAAEpE,IAAevD,EAAAA,GAAAA,IACjCpJ,IAAA,IAAG2F,MAAAkE,EAAOR,QAAAW,GAAAhK,EAAA,MAAe,CACvB8Q,WAAY9G,EAAQ8G,WACpBC,WAAY/G,EAAQ+G,WACpBC,YAAanH,EAAMmH,YACnBC,mBAAoBpH,EAAMoH,mBAAA,IAE5B,CAACpH,EAAMG,KAEL,GAAI4B,EAAsBtE,QACxB,OAAO,EAEF,GAAsC,OAAlCsE,EAAsBtE,QAE/B,OADAsE,EAAsBtE,SAAA,GAAU,EAIlC,GAAIuC,GAAMmH,aAAehH,GAAMgH,YAAa,CAC1C,MAAM9G,EAAU1D,OAAOhF,KAAKqI,EAAKmH,aAC3BvH,EAAajD,OAAOhF,KAAKwI,EAAKgH,aACpC,GAAI9G,EAAQtN,SAAW6M,EAAW7M,OAChC,OAAO,CAEX,CAEA,OAAIiN,GAAMoH,qBAAuBjH,GAAMiH,kBAK5B,KAITC,oBAAEzE,IAAwBrD,EAAAA,GAAAA,IAC9BlJ,IAAA,IAAGmJ,SAAW6H,oBAAArH,IAAA3J,EAAA,MAA6B,CACzCgR,oBAAArH,EAAA,IAkBJ,IAAIoD,GAdJjC,EAAAA,EAAAA,KAAU,KAEJvB,EAAS6C,SACXtJ,EAAkBsE,QAAUmC,EAAS6C,OACvC,GACC,CAAC7C,EAAS6C,SAUb,MAAM6E,gBAAE3C,EAAelC,OAAEC,EAAMC,SAAEK,GAAapD,EACxCsD,EAAgBR,GAAUvJ,EAAkBsE,QAC5C6E,EAAeY,IAEjBvU,EAAAA,GAAAA,GAAuB0Q,EAAOO,GAE5B8D,EAAc,CAClB7X,MAAAwT,EACAvT,OAAA8V,EACApM,IAAA3I,EACA8W,YAAa,aAGTR,EAAmB,IACpBO,EACHmD,OAvBuBA,KACnBtK,EAAakB,UACflB,EAAakB,QAAQ9I,MAAM8R,QAAU,GAEvCjI,GAAQ,EAoBR9I,QAAS,OACTC,SAAU,QACV4R,WAAA,GAGI/E,EAAa,IACdW,EACH0D,YAAA,GAGI5D,EAAa,IACdE,EACHnP,IAAKsO,GAEDe,EAAa,IACdK,EACHjO,MAAO5I,EACP2I,IAAK,KACLgS,KAAMrH,IAASR,GAAAA,GAAY8H,IAC3B5D,OAAA,EACAD,QAAS,WACTnB,OAAQS,EACRsD,iBAAkBxE,GA8CpB,GA3CI7B,IAASR,GAAAA,GAAY+H,OAASvH,IAASR,GAAAA,GAAYgI,SAErDvE,EAAQpD,EAAAA,cAACU,GAAK1T,GAAA,CAACoK,IAAKiJ,GAAS4C,EAAU,CAAExH,IAAKc,KAC9CiG,EAAWxO,IAAMsO,GACR,CAAC3C,GAAAA,GAAYiI,MAAOjI,GAAAA,GAAY8H,KAAKpJ,SAAS8B,KACvDiD,EACEpD,EAAAA,cAAAA,EAAAA,SACG,KAAA0C,IAAWV,EAEVhC,EAAAA,cAACU,GAAK1T,GAAA,CAACoK,IAAKiJ,GAAS4C,EAAU,CAAExH,IAAKc,KAGtCyD,EAAAA,cAACW,GAAK3T,GAAA,CAACoK,IAAKiJ,GAASgD,EAAU,CAAE5H,IAAKc,IACnC4D,IAASR,GAAAA,GAAY8H,IACpB7H,EAASiI,OAAO7T,KACdgM,EAAAA,cAAA,UACEhM,IAAK4L,EAASiI,OAAO7T,IACrBoL,KAAMQ,EAASiI,OAAOlF,WAI1B3C,EAAAA,cAAA,UACEhM,KAAKrF,EAAAA,GAAAA,GAAuB0Q,EAAOO,GACnCR,KAAM4D,KAKb7C,IAASR,GAAAA,GAAYiI,OAAS3F,GAAmB0C,GAChD3E,EAAAA,cAACE,GAAe,KACdF,EAAAA,cAAC8B,GAAQ,KAAE6C,IAGdxE,IAASR,GAAAA,GAAYiI,OAAS3F,GAAmBM,GAChDvC,EAAAA,cAACS,GAAW,KACVT,EAAAA,cAACD,GAAAA,EAAW,QAKpByC,EAAWxO,IAAM0O,IAGdU,EACH,MAAM,IAAI0E,MAAM,+BAGlB,MAaMC,EAAW5H,IAASR,GAAAA,GAAY+H,MAAQpF,EAAeI,EAE7D,OACE1C,EAAAA,cAAAA,EAAAA,SAAA,KACGoD,EACApB,GAAUhC,EAAAA,cAACF,GAAAA,EAAgB,CAACkI,UAAA,IAC7BhI,EAAAA,cAACb,GAAAA,EAAe,CACdsG,OAAQzD,EACRiF,WArBejH,IACd+B,EAAsBtE,UAEzB1Q,GAAAA,EAAauB,IAAIsR,EAAS/Q,GAAI,CAC5BoX,IAAK3D,EACLlD,KAAM,WAERwD,EAAoBhD,GACpBmC,EAAsBtE,SAAA,GAExB4E,EAAWzC,EAAUI,EAAMiI,QAASjI,EAAMkI,QAAQ,EAY9CC,cAAeA,KACbrF,EAAWlD,GACXmC,EAAsBtE,SAAA,CAAe,EAEvC2B,KAAMQ,EAASR,KACfgJ,aAAc,CAAEjG,SAAAvC,GAChB7K,QAASnG,EAAQmZ,GACjBM,aAAcjb,GACdkb,WAAY9F,IAIpB,I,4DC5OA,MAAMhE,GAAoB6B,EAAAA,GAAOsB,IAAGJ,WAAA,CAAAC,YAAA,mCAAAC,YAAA,eAAVpB,CAGzB,sCAEKV,GAAgBU,EAAAA,GAAOsB,IAAGJ,WAAA,CAAAC,YAAA,+BAAAC,YAAA,eAAVpB,CAErB,gBAEKuB,IAAqB/U,EAAAA,EAAAA,IAM1B,qDAIK8T,GACI,SADJ2B,GAEY,gBAiBlB,SAASiG,GAAA3c,GAQa,IARCuW,SACrB9B,EAAQpL,QACRpI,EAAO2b,SACPxb,EAAQnB,MACRuB,EAAK8E,MACL6P,EAAK0G,QACLpG,GAAA,EAAekC,gBACfrE,EAAkBU,EAAAA,EAAI8H,kBACtBhG,EAAoB9B,EAAAA,GAAAhV,EAEpB,MAAMuN,GAAkByG,EAAAA,EAAAA,OACjBqC,EAAYmB,IAAiBjD,EAAAA,EAAAA,KAAA,GAC9BoD,GAAatC,EAAAA,EAAAA,KAAajB,IAC9BA,EAAE2I,kBACFvF,GAAA,EAAmB,GAClB,IACGZ,GAAkBvB,EAAAA,EAAAA,KAAY,KAElCmC,GAAA,GACAjK,EAAgBsE,SAASgH,QAEzBvE,GAAiB,GAChB,CAACA,KAEE0I,oBAAEhG,EAAmBiG,gBAAE7F,IAAoBpU,EAAAA,GAAAA,IAAUoR,IAAA,CACzD4I,oBAAqB5I,EAAMlE,MAAMgN,aAAaC,WAAW,IAAIla,GAC7Dga,gBAAiB7I,EAAMR,QAAQqJ,qBAG3BzJ,KAAEqB,EAAIgC,OAAEQ,GAAW5C,EAInB8C,EAAS,CACb,CACEtN,QAAS,CACP,CAAE2O,MANY,CAAC,QAAS,OAAOnG,SAASoC,IAC1CF,EAAAA,EAAAA,IAAG,eAAgB,gBACnBA,EAAAA,EAAAA,IAAG,eAAgB,eAIKvU,MAAO2U,IAC7B,CACE6D,OAAOjE,EAAAA,EAAAA,IAAG,oBAAqB,eAC/BvU,MAAOsW,QA6Bf/F,EAAAA,GAAAA,GAAkB,CAAEd,IAAKtC,GAAmB,GAxFjB,GA0F3B,MAAMoJ,GAAcT,EAAAA,GAAAA,MACpBvC,EAAAA,GAAAA,IAAiB8C,EAAU,KAAOlJ,EAAiB,MAAOoJ,EAAa,CACrEA,IAGF,MAAMoC,GAAS5X,EAAAA,EAAAA,KAAQ,IAAM,SAAQ4B,EAAAA,EAAAA,QAAY,IAC3CmU,GAAW/V,EAAAA,EAAAA,KAAQ,IAAM,WAAU4B,EAAAA,EAAAA,QAAY,IAGrD,OACEqR,EAAAA,cAACL,GAAA,KACCK,EAAAA,cAACgC,GAAAA,GAAY,CACXvG,IAAKtC,EACLpE,QAASwO,EACT,cAAYhD,EAAAA,EAAAA,IAAG,sBAAuB,eACtC,eAAc0B,EACd,mBACA,gBAAeA,EACf,YAAWA,EAAa0C,EAAS,KACjC9V,GAAIiU,EACJ8B,SAAU/X,EACVgY,SAAoB,IAAV9C,EAAc,GAAK,GAE7B/B,EAAAA,cAACb,GAAAA,EAAqB,OAEvB8C,GACCjC,EAAAA,cAACX,EAAAA,EAAK,CACJyF,OAAQ3L,EACR4L,UAAWhF,EAAAA,EAAUiF,YACrBnE,OAAQoB,GAERjC,EAAAA,cAACxB,GAAA,KACCwB,EAAAA,cAACmB,EAAAA,EAAI,CACH8D,SAAUnC,EACVoC,OAAQP,EACRQ,qBA5DeA,CAACnF,EAAKnT,KAC/B,MAAM+S,EAAeqD,IAAUvC,EAAAA,GAAAA,GAAuBtT,EAAOiT,GACvDF,GAAaL,EAAAA,GAAAA,GAAqBO,EAASjB,KAAM,CACrD+C,SAAA9B,IAGF,OADA+C,GAAA,GACQvW,GACN,KAAK8T,GACH3T,EAASqT,EAAUT,GACnB,MACF,KAAK0C,GACHU,EAAgB,CACdgG,aAAc7I,EACd8I,SAAUrG,IAOhBF,GAAmB,EAyCT0C,OAAQjC,EACRkC,cAAe7C,EACf8C,aAAA,EACAC,mBAAoB3D,OAOlC,C,uOCjKA,MAEMjB,GAAYR,EAAAA,GAAOwB,IAAIiF,OAAO5G,IAAA,CAClCrL,MAAO,CACL9I,MAAOmU,EAAMnU,MAAQ,KACrBC,OAAQkU,EAAMlU,OAAS,KACvBod,OAAQlJ,EAAMkJ,OACdC,gBAAiB,cACjBC,MAAO,UACPC,OAAQ,OACRpZ,QAAS,OAEVsR,WAAA,CAAAC,YAAA,0BAAAC,YAAA,eAVetB,CAUb,MAECD,GAAiBC,EAAAA,GAAOwB,IAAGJ,WAAA,CAAAC,YAAA,+BAAAC,YAAA,eAAVtB,CAAU,6EAIXvU,IAAA,IAAG4Z,MAAAxF,EAAOsJ,WAAAnJ,GAAAvU,EAAA,OAC5BuU,IAA0BgB,EAAAA,EAAAA,IAAKnB,EAAM0F,OAAOC,SAAS4D,MAAO,OAG1DxH,IAAoB5B,EAAAA,EAAAA,IAAOS,EAAAA,GAASW,WAAA,CAAAC,YAAA,kCAAAC,YAAA,eAAhBtB,CAIzB,gDAED,SAASqJ,GAAAzY,GAQP,IARemB,MACfiO,EAAKgC,SACL9B,EACAxU,MAAOsV,EACPrV,OAAQ8U,EAAesI,OACvB3J,EAAMiJ,SACN9H,EAAQ+I,aACR7a,EAAY8a,aACZ5H,GAAA/Q,EAEA,MACElC,GAAIwT,EAAUrO,IACdwK,EAAGY,KACHkD,EACAzW,MAAO0Q,EACPzQ,OAAQkW,EAAcxM,IACtB6N,EAAG2D,QACHzE,EAAOoH,UACPjH,EAASkH,SACTxc,GACEiT,GAEEwJ,4BAAE/G,EAA2BgH,2BAAElH,IACnCzD,EAAAA,GAAAA,IAAc/N,IAAA,IAAG0K,MAAAkE,GAAA5O,EAAA,MAAa,CAC5ByY,4BAA6B7J,EAAM6J,4BACnCC,2BAA4B9J,EAAM8J,2BAAA,IAGhC9G,EACJzG,GAAiByF,EAAiBzF,EAAgByF,EAAiB,EAC/DoB,EAAQjC,GAAkBP,EAAkBoC,EAC5C7J,EAASyH,GAAmBwC,EAAQJ,EAEpCR,GAAe5C,EAAAA,EAAAA,OACduD,EAAiBD,IAAsBjC,EAAAA,EAAAA,KAAA,IACvCsC,EAAQtB,IAAahB,EAAAA,EAAAA,KAAA,IACrB8I,EAAYrG,IAAiBzC,EAAAA,EAAAA,KAAA,IAC7B0D,EAAU1B,IAAahC,EAAAA,EAAAA,KAAA,GAExB+I,GAAajd,EAAAA,EAAAA,KAAY,IAAMkV,GAAA,IAAiB,IAChDgI,GAAeld,EAAAA,EAAAA,KAAY,IAAMkV,GAAA,IAAkB,IACnDiI,GAAand,EAAAA,EAAAA,KAAY,IAAM2W,GAAA,IAAqB,IACpDqE,GAAkBhb,EAAAA,EAAAA,KAAY,IAAM2W,GAAA,IAAsB,IAC1DyG,GAAiBpd,EAAAA,EAAAA,KAAY,KACjC2W,GAAA,GACAzB,GAAA,EAAgB,GACf,KAEImI,EAAYC,IAAiBpJ,EAAAA,EAAAA,IAAS,MACvCqJ,GAAY1K,EAAAA,EAAAA,IAAO2D,GACzB+G,EAAU7M,QAAU8F,GAEpB5U,EAAAA,EAAAA,KAAU,KACR,IAAK,CAACoR,GAAAA,GAAY6H,MAAO7H,GAAAA,GAAY0H,KAAKpJ,SAASiE,GACjD,OAEF,MAAMtC,EAAiBA,KACF,OAAfoK,IACFG,aAAaH,GACbC,EAAc,MAChB,EAEF,IAAKN,EACH,GAAIxG,GAEF,GADAL,GAAA,GACIV,EAAa/E,SAA0B,OAAf2M,EAAqB,CAC/C,MAAMpK,EAAQwK,YAAW,KACnBF,EAAU7M,SAAWe,GACvBgE,EAAa/E,QAAQgN,OAAOC,MAAM/K,GAAAA,EACpC,GAjG4B,KAmG9B0K,EAAcrK,EAEhB,OAEAkD,GAAA,GACAlD,IACIwC,EAAa/E,SAAW+E,EAAa/E,SAASkN,OAASnM,IAEzDgE,EAAa/E,QAAQkN,QACrBnI,EAAa/E,QAAQmN,YAAc,GAIzC,OAAO5K,CAAc,GACpB,CAAC+J,EAAYxG,EAAQjB,EAAM9D,EAAK4L,EAAYC,EAAeC,IAE9D,MAAMO,GAAU9d,EAAAA,EAAAA,KACbiT,GAAiB,KAChBU,EAASL,EAAUL,EAAa,GAElC,CAACU,EAAUL,IAGPyK,EAAcvH,GAClBlD,EAAS0K,aAAa/E,QAAQxE,aAC9BnB,EAAS0K,aAAa/E,QAAQC,KAC5BjG,EAAAA,cAACF,GAAW,CACVkG,OAAQ3F,EAAS0K,YAAY/E,OAAOxE,YACpCyE,IAAK5F,EAAS0K,YAAY/E,OAAOC,MAIjC+E,GAAMpL,EAAAA,EAAAA,MAENqL,GAASle,EAAAA,EAAAA,KAAY,IAAMkW,GAAA,IAAiB,IAE5CiI,GAAiBvG,IAAapB,EAEpC,OACEvD,EAAAA,cAACW,GAAS,CACRlF,IAAKuP,EACL,cAAa,gBAAgB1I,IAC7B,UAASD,EACTzN,UAAW,eACX/I,MAAOuX,EACPtX,OAAQqN,EACR+P,OAAQ3J,EACR2G,eAAgB8D,EAChB7D,QAAS6D,EACT5D,eAAgB6D,EAChB5D,OAAQ4D,EACRpF,SAAS,MAET7E,EAAAA,cAACE,GAAc,CAACoJ,WAAY4B,GAAiBxI,GAC3C1C,EAAAA,cAAChT,GAAY,CACXoS,KAAMkD,EACNtO,IAAKwK,EACLuI,aAAcvE,EACdL,SAAU9B,EACV7K,IAAK6N,EACL2D,QAASzE,EACT1W,MAAOuX,EACPtX,OAAQqN,EACRpE,QAAS8V,EACThE,OAAQoE,EACRnE,gBAAiB3D,EACjBsC,OAAQlC,IAETuH,EACAI,GAAiB9d,GAChB4S,EAAAA,cAAC+B,GAAiB,CAChBoJ,KAAM/d,EACNvB,MAAOuX,EACPtX,OAAQqN,EACRiS,MAAO,MAGR5M,GACDsE,EAA4BT,IAC5BO,EAA2BP,KAC3BrC,EAAAA,cAACnT,EAAAA,EAAU,CAACwe,gBAAgB9K,EAAAA,EAAAA,IAAG,wBAAoB,iBAErDP,EAAAA,cAAC4B,GAAa,CACZO,SAAU9B,EACVpL,QAASsO,EACTiF,SAAU9H,EACV7U,MAAOuX,EACPlR,MAAOiO,EACPsI,QAA0B,UAAjB7Z,EACT2V,gBAAiByF,EACjBtB,kBAAmBuB,IAEH,UAAjBrb,GAA4BkT,GAC3B9B,EAAAA,cAACX,GAAY,CACX8C,SAAU9B,EACVpL,QAASsO,EACTY,WAAY4F,EACZ3F,WAAY8F,EACZ7F,gBAAiB0D,EACjBzD,eAAgB6F,EAChB5F,gBAAiByF,KAM7B,CA2EA,IAAepb,IAAAyR,EAAAA,EAAAA,KAhDf,SAAS1P,GAGJ,IAHiB8Y,aACpBtJ,EAAe,QAAOuJ,aACtBrJ,GAAA,KACGT,GAAAjP,EAEH,MAAMkZ,4BAAE5I,EAA2B6I,2BAAE/c,IACnCoS,EAAAA,GAAAA,IAAchN,IAAA,IAAG2J,MAAAkE,GAAA7N,EAAA,MAAa,CAC5B0X,4BAA6B7J,EAAM6J,4BACnCC,2BAA4B9J,EAAM8J,2BAAA,KAG9Bjb,GAAIF,GAAeiR,EAAMuC,SAEjC,OACElB,EAA4BtS,IAC5B5B,EAA2B4B,GAGzBqR,EAAAA,cAACT,GAAAA,EAAO,CAAC9J,OAAO8K,EAAAA,EAAAA,IAAG,wBAAoB,gBACrCP,EAAAA,cAACwJ,GAAO9I,GAAA,GACFd,EAAK,CACT6J,aAActJ,EACduJ,aAAcrJ,MAOpBL,EAAAA,cAACwJ,GAAO9I,GAAA,GACFd,EAAK,CACT6J,aAActJ,EACduJ,aAAcrJ,IAGpB,I,YCzRA,MAEM1R,GAAkB,CAAEgD,UAAW,GAG/B+J,GAAoB9P,IAAA,IAAG2K,SAAA4J,EAAU3E,aAAA6E,GAAAzU,EAAA,OAC9BoU,EAAAA,cAACnT,GAAAA,GAAgB,CAAC4O,IAAK4E,GAAeF,EAAA,EAGzCmL,GAAcva,IAAA,IAAGwF,SAAAyJ,GAAAjP,EAAA,OAAeiP,CAAA,EAkBtC,SAASuL,GAAAna,GAKQ,IALKoa,UACpB3e,EAAS4e,mBACT1L,EAAqB,GAAEyI,SACvBvH,EAAQwI,aACRpK,EAAYqK,aACZ9H,GAAA,GAAexQ,EAGf,MAAM+N,EAAS,IACVY,EAAmB9N,KAAK+N,IAAA,CACzB5I,IAAK,aAAa4I,EAASnR,KAC3BmF,IAAKgM,EAAShM,IACdnI,MAAOmU,EAASnU,MAChBC,OAAQkU,EAASlU,OACjBqW,SAAAnC,SAECnT,EAAUoF,KAAK+N,IAAA,CAChB5I,IAAK4I,EAASnR,GACdmF,IAAKgM,EAAShM,IACdnI,MAAOmU,EAASnU,MAChBC,OAAQkU,EAASlU,OACjBqW,SAAAnC,OAEF/N,KAAI,CAAC+N,EAAOG,KAAA,IACTH,EACH9N,MAAAiO,MAGIgB,GAAgBhB,EAAAA,EAAAA,KACpBxP,IAAA,IAAGP,MAAA+P,EAAOnO,OAAAqO,GAAA1P,EAAA,OAENqP,EAAAA,cAACjT,GAAY,CACXqK,IAAK+I,EAAM/I,IACXlF,MAAOiO,EAAMjO,MACbgX,OAAQ,kBACR/G,SAAUhC,EAAMgC,SAChBtW,MAAOwU,EAAOxU,MACdC,OAAQuU,EAAOvU,OACf0c,SAAUvH,EACVwI,aAAcpK,EACdqK,aAAc9H,GAAA,GAIpB,CAACvC,EAAc4B,EAAUW,IAG3B,OACE5B,EAAAA,cAAA,WACEA,EAAAA,cAACK,EAAO,CACNrO,OAAO,OACP1B,OAAQ6O,EACRrK,YAAaqM,EACbxK,mBAAoB2U,GACpB3P,gBAAiBD,GACjBnL,gBAjFkB,IAkFlBM,eAAgBlC,GAChBqB,QApFc,EAsFdsN,sBAAuBsC,EAAAA,KAI/B,C","sources":["../node_modules/react-photo-album/dist/index.mjs","../node_modules/@googleforcreators/story-editor/src/components/library/panes/media/local/deleteDialog.js","../node_modules/@googleforcreators/story-editor/src/components/library/panes/media/local/mediaEditDialog.js","../node_modules/@googleforcreators/story-editor/src/components/library/panes/media/local/dropDownMenu.js","../node_modules/@googleforcreators/story-editor/src/components/library/panes/media/common/attribution.js","../node_modules/@googleforcreators/story-editor/src/components/library/panes/media/common/innerElement.js","../node_modules/@googleforcreators/story-editor/src/components/library/panes/media/common/insertionMenu.js","../node_modules/@googleforcreators/story-editor/src/components/library/panes/media/common/mediaElement.js","../node_modules/@googleforcreators/story-editor/src/components/library/panes/media/common/mediaGallery.js"],"sourcesContent":["\"use client\";\nimport * as React from \"react\";\nfunction ratio({ width, height }) {\n  return width / height;\n}\nfunction round(value, decimals = 0) {\n  const factor = 10 ** decimals;\n  return Math.round((value + Number.EPSILON) * factor) / factor;\n}\nfunction rankingFunctionComparator(rank) {\n  return (a, b) => rank(b) - rank(a);\n}\nclass MinHeap {\n  constructor(comparator) {\n    this.comparator = comparator;\n    this.heap = [];\n    this.n = 0;\n  }\n  greater(i, j) {\n    return this.comparator(this.heap[i], this.heap[j]) < 0;\n  }\n  swap(i, j) {\n    const temp = this.heap[i];\n    this.heap[i] = this.heap[j];\n    this.heap[j] = temp;\n  }\n  swim(i) {\n    let k = i;\n    let k2 = Math.floor(k / 2);\n    while (k > 1 && this.greater(k2, k)) {\n      this.swap(k2, k);\n      k = k2;\n      k2 = Math.floor(k / 2);\n    }\n  }\n  sink(i) {\n    let k = i;\n    let k2 = k * 2;\n    while (k2 <= this.n) {\n      if (k2 < this.n && this.greater(k2, k2 + 1)) k2 += 1;\n      if (!this.greater(k, k2)) break;\n      this.swap(k, k2);\n      k = k2;\n      k2 = k * 2;\n    }\n  }\n  push(element) {\n    this.n += 1;\n    this.heap[this.n] = element;\n    this.swim(this.n);\n  }\n  pop() {\n    if (this.n === 0) return void 0;\n    this.swap(1, this.n);\n    this.n -= 1;\n    const max = this.heap.pop();\n    this.sink(1);\n    return max;\n  }\n  size() {\n    return this.n;\n  }\n}\nfunction buildPrecedentsMap(graph, startNode, endNode) {\n  const precedentsMap = /* @__PURE__ */ new Map();\n  const visited = /* @__PURE__ */ new Set();\n  const storedShortestPaths = /* @__PURE__ */ new Map();\n  storedShortestPaths.set(startNode, 0);\n  const queue = new MinHeap(rankingFunctionComparator((el) => el.weight));\n  queue.push({ id: startNode, weight: 0 });\n  while (queue.size() > 0) {\n    const { id, weight } = queue.pop();\n    if (!visited.has(id)) {\n      const neighboringNodes = graph(id);\n      visited.add(id);\n      neighboringNodes.forEach((neighborWeight, neighbor) => {\n        const newWeight = weight + neighborWeight;\n        const currentId = precedentsMap.get(neighbor);\n        const currentWeight = storedShortestPaths.get(neighbor);\n        if (currentWeight === void 0 || currentWeight > newWeight && (currentWeight / newWeight > 1.005 || currentId !== void 0 && currentId < id)) {\n          storedShortestPaths.set(neighbor, newWeight);\n          queue.push({ id: neighbor, weight: newWeight });\n          precedentsMap.set(neighbor, id);\n        }\n      });\n    }\n  }\n  return storedShortestPaths.has(endNode) ? precedentsMap : void 0;\n}\nfunction getPathFromPrecedentsMap(precedentsMap, endNode) {\n  const nodes = [];\n  for (let node = endNode; node !== void 0; node = precedentsMap.get(node)) {\n    nodes.push(node);\n  }\n  return nodes.reverse();\n}\nfunction findShortestPath(graph, startNode, endNode) {\n  const precedentsMap = buildPrecedentsMap(graph, startNode, endNode);\n  return precedentsMap ? getPathFromPrecedentsMap(precedentsMap, endNode) : void 0;\n}\nfunction findIdealNodeSearch({\n  photos,\n  targetRowHeight,\n  containerWidth\n}) {\n  const minRatio = photos.reduce((acc, photo) => Math.min(ratio(photo), acc), Number.MAX_VALUE);\n  return round(containerWidth / targetRowHeight / minRatio) + 2;\n}\nfunction getCommonHeight(row, containerWidth, spacing, padding) {\n  const rowWidth = containerWidth - (row.length - 1) * spacing - 2 * padding * row.length;\n  const totalAspectRatio = row.reduce((acc, photo) => acc + ratio(photo), 0);\n  return rowWidth / totalAspectRatio;\n}\nfunction cost(photos, i, j, width, targetRowHeight, spacing, padding) {\n  const row = photos.slice(i, j);\n  const commonHeight = getCommonHeight(row, width, spacing, padding);\n  return commonHeight > 0 ? (commonHeight - targetRowHeight) ** 2 * row.length : void 0;\n}\nfunction makeGetRowNeighbors({\n  photos,\n  layoutOptions,\n  targetRowHeight,\n  limitNodeSearch,\n  rowConstraints\n}) {\n  return (node) => {\n    var _a, _b;\n    const { containerWidth, spacing, padding } = layoutOptions;\n    const results = /* @__PURE__ */ new Map();\n    results.set(node, 0);\n    const startOffset = (_a = rowConstraints == null ? void 0 : rowConstraints.minPhotos) != null ? _a : 1;\n    const endOffset = Math.min(limitNodeSearch, (_b = rowConstraints == null ? void 0 : rowConstraints.maxPhotos) != null ? _b : Infinity);\n    for (let i = node + startOffset; i < photos.length + 1; i += 1) {\n      if (i - node > endOffset) break;\n      const currentCost = cost(photos, node, i, containerWidth, targetRowHeight, spacing, padding);\n      if (currentCost === void 0) break;\n      results.set(i, currentCost);\n    }\n    return results;\n  };\n}\nfunction computeRowsLayout({\n  photos,\n  layoutOptions\n}) {\n  const { spacing, padding, containerWidth, targetRowHeight, rowConstraints } = layoutOptions;\n  const limitNodeSearch = findIdealNodeSearch({ photos, containerWidth, targetRowHeight });\n  const getNeighbors = makeGetRowNeighbors({\n    photos,\n    layoutOptions,\n    targetRowHeight,\n    limitNodeSearch,\n    rowConstraints\n  });\n  const path = findShortestPath(getNeighbors, 0, photos.length);\n  if (path === void 0) return void 0;\n  const layout = [];\n  for (let i = 1; i < path.length; i += 1) {\n    const row = photos.map((photo, index) => ({ photo, index })).slice(path[i - 1], path[i]);\n    const height = getCommonHeight(\n      row.map(({ photo }) => photo),\n      containerWidth,\n      spacing,\n      padding\n    );\n    layout.push(\n      row.map(({ photo, index }, photoIndex) => ({\n        photo,\n        layout: {\n          height,\n          width: height * ratio(photo),\n          index,\n          photoIndex,\n          photosCount: row.length\n        }\n      }))\n    );\n  }\n  return layout;\n}\nfunction clsx(...classes) {\n  return [...classes].filter((cls) => Boolean(cls)).join(\" \");\n}\nfunction calcWidth(base, photoLayout, layoutOptions) {\n  const { width, photosCount } = photoLayout;\n  const { layout, spacing, padding, containerWidth } = layoutOptions;\n  const count = layout === \"rows\" ? photosCount : layoutOptions.columns;\n  const gaps = spacing * (count - 1) + 2 * padding * count;\n  return `calc((${base} - ${gaps}px) / ${round((containerWidth - gaps) / width, 5)})`;\n}\nfunction cssPhotoWidth(layout, layoutOptions) {\n  return layoutOptions.layout !== \"rows\" ? `calc(100% - ${2 * layoutOptions.padding}px)` : calcWidth(\"100%\", layout, layoutOptions);\n}\nfunction calculateSizesValue(size, layout, layoutOptions) {\n  var _a, _b;\n  return calcWidth((_b = (_a = size.match(/^\\s*calc\\((.*)\\)\\s*$/)) == null ? void 0 : _a[1]) != null ? _b : size, layout, layoutOptions);\n}\nfunction srcSetAndSizes(photo, layout, layoutOptions) {\n  var _a;\n  let srcSet;\n  let sizes;\n  const images = photo.srcSet || photo.images;\n  if (images && images.length > 0) {\n    srcSet = images.concat(\n      !images.find(({ width }) => width === photo.width) ? [{ src: photo.src, width: photo.width, height: photo.height }] : []\n    ).sort((first, second) => first.width - second.width).map((image) => `${image.src} ${image.width}w`).join(\", \");\n  }\n  if ((_a = layoutOptions.sizes) == null ? void 0 : _a.size) {\n    sizes = (layoutOptions.sizes.sizes || []).map(({ viewport, size }) => `${viewport} ${calculateSizesValue(size, layout, layoutOptions)}`).concat(calculateSizesValue(layoutOptions.sizes.size, layout, layoutOptions)).join(\", \");\n  } else {\n    sizes = `${Math.ceil(layout.width / layoutOptions.containerWidth * 100)}vw`;\n  }\n  return { srcSet, sizes };\n}\nfunction PhotoRenderer(props) {\n  var _a, _b;\n  const { photo, layout, layoutOptions, imageProps: { style, className, ...restImageProps } = {}, renderPhoto } = props;\n  const { onClick } = layoutOptions;\n  const imageStyle = {\n    display: \"block\",\n    boxSizing: \"content-box\",\n    width: cssPhotoWidth(layout, layoutOptions),\n    height: \"auto\",\n    aspectRatio: `${photo.width} / ${photo.height}`,\n    ...layoutOptions.padding ? { padding: `${layoutOptions.padding}px` } : null,\n    ...(layoutOptions.layout === \"columns\" || layoutOptions.layout === \"masonry\") && layout.photoIndex < layout.photosCount - 1 ? { marginBottom: `${layoutOptions.spacing}px` } : null,\n    ...onClick ? { cursor: \"pointer\" } : null,\n    ...style\n  };\n  const handleClick = onClick ? (event) => {\n    onClick({ event, photo, index: layout.index });\n  } : void 0;\n  const imageProps = {\n    src: photo.src,\n    alt: (_a = photo.alt) != null ? _a : \"\",\n    title: photo.title,\n    onClick: handleClick,\n    style: imageStyle,\n    className: clsx(\"react-photo-album--photo\", className),\n    loading: \"lazy\",\n    decoding: \"async\",\n    ...srcSetAndSizes(photo, layout, layoutOptions),\n    ...restImageProps\n  };\n  const renderDefaultPhoto = (options) => {\n    const { src, alt, srcSet, sizes, style: unwrappedStyle, ...rest } = imageProps;\n    return React.createElement(\n      \"img\",\n      {\n        alt,\n        ...srcSet ? { srcSet, sizes } : null,\n        src,\n        style: (options == null ? void 0 : options.wrapped) ? { display: \"block\", width: \"100%\", height: \"100%\" } : unwrappedStyle,\n        ...rest\n      }\n    );\n  };\n  const wrapperStyle = (({ display, boxSizing, width, aspectRatio, padding, marginBottom, cursor }) => ({\n    display,\n    boxSizing,\n    width,\n    aspectRatio,\n    padding,\n    marginBottom,\n    cursor\n  }))(imageStyle);\n  return React.createElement(React.Fragment, null, (_b = renderPhoto == null ? void 0 : renderPhoto({\n    photo,\n    layout,\n    layoutOptions,\n    imageProps,\n    renderDefaultPhoto,\n    wrapperStyle\n  })) != null ? _b : renderDefaultPhoto());\n}\nfunction defaultRenderRowContainer({\n  rowContainerProps,\n  children\n}) {\n  return React.createElement(\"div\", { ...rowContainerProps }, children);\n}\nfunction RowContainerRenderer(props) {\n  const {\n    layoutOptions,\n    rowIndex,\n    rowsCount,\n    renderRowContainer,\n    rowContainerProps: { style, className, ...restRowContainerProps } = {},\n    children\n  } = props;\n  const rowContainerProps = {\n    className: clsx(\"react-photo-album--row\", className),\n    style: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      flexWrap: \"nowrap\",\n      alignItems: \"flex-start\",\n      justifyContent: \"space-between\",\n      ...rowIndex < rowsCount - 1 ? { marginBottom: `${layoutOptions.spacing}px` } : null,\n      ...style\n    },\n    ...restRowContainerProps\n  };\n  return React.createElement(React.Fragment, null, (renderRowContainer != null ? renderRowContainer : defaultRenderRowContainer)({\n    layoutOptions,\n    rowIndex,\n    rowsCount,\n    rowContainerProps,\n    children\n  }));\n}\nfunction RowsLayout(props) {\n  const {\n    photos,\n    layoutOptions,\n    renderPhoto,\n    renderRowContainer,\n    componentsProps: { imageProps, rowContainerProps }\n  } = props;\n  const rowsLayout = computeRowsLayout({ photos, layoutOptions });\n  if (!rowsLayout) return null;\n  return React.createElement(React.Fragment, null, rowsLayout.map((row, rowIndex) => React.createElement(\n    RowContainerRenderer,\n    {\n      key: `row-${rowIndex}`,\n      layoutOptions,\n      rowIndex,\n      rowsCount: rowsLayout.length,\n      renderRowContainer,\n      rowContainerProps\n    },\n    row.map(({ photo, layout }) => React.createElement(\n      PhotoRenderer,\n      {\n        key: photo.key || photo.src,\n        photo,\n        layout,\n        layoutOptions,\n        renderPhoto,\n        imageProps\n      }\n    ))\n  )));\n}\nfunction computeShortestPath(graph, pathLength, startNode, endNode) {\n  const matrix = /* @__PURE__ */ new Map();\n  const queue = /* @__PURE__ */ new Set();\n  queue.add(startNode);\n  for (let length = 0; length < pathLength; length += 1) {\n    const currentQueue = [...queue.keys()];\n    queue.clear();\n    currentQueue.forEach((node) => {\n      const accumulatedWeight = length > 0 ? matrix.get(node)[length].weight : 0;\n      graph(node).forEach(({ neighbor, weight }) => {\n        let paths = matrix.get(neighbor);\n        if (!paths) {\n          paths = [];\n          matrix.set(neighbor, paths);\n        }\n        const newWeight = accumulatedWeight + weight;\n        const nextPath = paths[length + 1];\n        if (!nextPath || nextPath.weight > newWeight && (nextPath.weight / newWeight > 1.0001 || node < nextPath.node)) {\n          paths[length + 1] = { node, weight: newWeight };\n        }\n        if (length < pathLength - 1 && neighbor !== endNode) {\n          queue.add(neighbor);\n        }\n      });\n    });\n  }\n  return matrix;\n}\nfunction reconstructShortestPath(matrix, pathLength, endNode) {\n  const path = [endNode];\n  for (let node = endNode, length = pathLength; length > 0; length -= 1) {\n    node = matrix.get(node)[length].node;\n    path.push(node);\n  }\n  return path.reverse();\n}\nfunction findShortestPathLengthN(graph, pathLength, startNode, endNode) {\n  return reconstructShortestPath(computeShortestPath(graph, pathLength, startNode, endNode), pathLength, endNode);\n}\nfunction makeGetColumnNeighbors({\n  photos,\n  spacing,\n  padding,\n  targetColumnWidth,\n  targetColumnHeight\n}) {\n  return (node) => {\n    const results = [];\n    const cutOffHeight = targetColumnHeight * 1.5;\n    let height = targetColumnWidth / ratio(photos[node]) + 2 * padding;\n    for (let i = node + 1; i < photos.length + 1; i += 1) {\n      results.push({ neighbor: i, weight: (targetColumnHeight - height) ** 2 });\n      if (height > cutOffHeight || i === photos.length) {\n        break;\n      }\n      height += targetColumnWidth / ratio(photos[i]) + spacing + 2 * padding;\n    }\n    return results;\n  };\n}\nfunction buildColumnsModel({\n  path,\n  photos,\n  containerWidth,\n  columnsGaps,\n  columnsRatios,\n  spacing,\n  padding\n}) {\n  const columnsModel = [];\n  const totalRatio = columnsRatios.reduce((total, columnRatio) => total + columnRatio, 0);\n  for (let i = 0; i < path.length - 1; i += 1) {\n    const column = photos.map((photo, index) => ({ photo, index })).slice(path[i], path[i + 1]);\n    const totalAdjustedGaps = columnsRatios.reduce(\n      (total, columnRatio, index) => total + (columnsGaps[i] - columnsGaps[index]) * columnRatio,\n      0\n    );\n    const columnWidth = (containerWidth - (path.length - 2) * spacing - 2 * (path.length - 1) * padding - totalAdjustedGaps) * columnsRatios[i] / totalRatio;\n    columnsModel.push(\n      column.map(({ photo, index }, photoIndex) => ({\n        photo,\n        layout: {\n          width: columnWidth,\n          height: columnWidth / ratio(photo),\n          index,\n          photoIndex,\n          photosCount: column.length\n        }\n      }))\n    );\n  }\n  return columnsModel;\n}\nfunction computeColumnsModel({\n  photos,\n  layoutOptions,\n  targetColumnWidth\n}) {\n  const { columns, spacing, padding, containerWidth } = layoutOptions;\n  const columnsGaps = [];\n  const columnsRatios = [];\n  if (photos.length <= columns) {\n    const averageRatio = photos.length > 0 ? photos.reduce((acc, photo) => acc + ratio(photo), 0) / photos.length : 1;\n    for (let i = 0; i < columns; i += 1) {\n      columnsGaps[i] = 2 * padding;\n      columnsRatios[i] = i < photos.length ? ratio(photos[i]) : averageRatio;\n    }\n    const columnsModel2 = buildColumnsModel({\n      path: Array.from({ length: columns + 1 }).map((_, index) => Math.min(index, photos.length)),\n      photos,\n      columnsRatios,\n      columnsGaps,\n      containerWidth,\n      spacing,\n      padding\n    });\n    return { columnsGaps, columnsRatios, columnsModel: columnsModel2 };\n  }\n  const targetColumnHeight = (photos.reduce((acc, photo) => acc + targetColumnWidth / ratio(photo), 0) + spacing * (photos.length - columns) + 2 * padding * photos.length) / columns;\n  const getNeighbors = makeGetColumnNeighbors({\n    photos,\n    targetColumnWidth,\n    targetColumnHeight,\n    spacing,\n    padding\n  });\n  const path = findShortestPathLengthN(getNeighbors, columns, 0, photos.length);\n  for (let i = 0; i < path.length - 1; i += 1) {\n    const column = photos.slice(path[i], path[i + 1]);\n    columnsGaps[i] = spacing * (column.length - 1) + 2 * padding * column.length;\n    columnsRatios[i] = 1 / column.reduce((acc, photo) => acc + 1 / ratio(photo), 0);\n  }\n  const columnsModel = buildColumnsModel({\n    path,\n    photos,\n    columnsRatios,\n    columnsGaps,\n    containerWidth,\n    spacing,\n    padding\n  });\n  return { columnsGaps, columnsRatios, columnsModel };\n}\nfunction computeLayout(props) {\n  const { photos, layoutOptions } = props;\n  const { columns, spacing, padding, containerWidth } = layoutOptions;\n  const targetColumnWidth = (containerWidth - spacing * (columns - 1) - 2 * padding * columns) / columns;\n  const { columnsGaps, columnsRatios, columnsModel } = computeColumnsModel({\n    photos,\n    layoutOptions,\n    targetColumnWidth\n  });\n  if (columnsModel.findIndex(\n    (columnModel) => columnModel.findIndex(({ layout: { width, height } }) => width < 0 || height < 0) >= 0\n  ) >= 0) {\n    if (columns > 1) {\n      return computeLayout({ photos, layoutOptions: { ...layoutOptions, columns: columns - 1 } });\n    }\n    return void 0;\n  }\n  return { columnsModel, columnsGaps, columnsRatios };\n}\nfunction computeColumnsLayout({\n  photos,\n  layoutOptions\n}) {\n  return computeLayout({ photos, layoutOptions });\n}\nfunction defaultRenderColumnContainer({\n  columnContainerProps,\n  children\n}) {\n  return React.createElement(\"div\", { ...columnContainerProps }, children);\n}\nfunction cssColumnWidth(props) {\n  const { layoutOptions, columnIndex, columnsCount, columnsGaps, columnsRatios } = props;\n  const { layout, spacing, padding } = layoutOptions;\n  if (layout === \"masonry\" || !columnsGaps || !columnsRatios) {\n    return `calc((100% - ${spacing * (columnsCount - 1)}px) / ${columnsCount})`;\n  }\n  const totalRatio = columnsRatios.reduce((acc, ratio2) => acc + ratio2, 0);\n  const totalAdjustedGaps = columnsRatios.reduce(\n    (acc, ratio2, index) => acc + (columnsGaps[columnIndex] - columnsGaps[index]) * ratio2,\n    0\n  );\n  return `calc((100% - ${round(\n    (columnsCount - 1) * spacing + 2 * columnsCount * padding + totalAdjustedGaps,\n    3\n  )}px) * ${round(columnsRatios[columnIndex] / totalRatio, 5)} + ${2 * padding}px)`;\n}\nfunction ColumnContainerRenderer(props) {\n  const {\n    layoutOptions,\n    renderColumnContainer,\n    children,\n    columnContainerProps: { style, className, ...restColumnContainerProps } = {},\n    ...rest\n  } = props;\n  const columnContainerProps = {\n    className: clsx(\"react-photo-album--column\", className),\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      flexWrap: \"nowrap\",\n      alignItems: \"flex-start\",\n      width: cssColumnWidth(props),\n      justifyContent: layoutOptions.layout === \"columns\" ? \"space-between\" : \"flex-start\",\n      ...style\n    },\n    ...restColumnContainerProps\n  };\n  return React.createElement(React.Fragment, null, (renderColumnContainer != null ? renderColumnContainer : defaultRenderColumnContainer)({\n    layoutOptions,\n    columnContainerProps,\n    children,\n    ...rest\n  }));\n}\nfunction ColumnsLayout(props) {\n  const {\n    photos,\n    layoutOptions,\n    renderPhoto,\n    renderColumnContainer,\n    componentsProps: { imageProps, columnContainerProps }\n  } = props;\n  const columnsLayout = computeColumnsLayout({ photos, layoutOptions });\n  if (!columnsLayout) return null;\n  const { columnsModel, columnsRatios, columnsGaps } = columnsLayout;\n  return React.createElement(React.Fragment, null, columnsModel.map((column, columnIndex) => React.createElement(\n    ColumnContainerRenderer,\n    {\n      key: `column-${columnIndex}`,\n      layoutOptions,\n      columnIndex,\n      columnsCount: columnsModel.length,\n      columnsGaps,\n      columnsRatios,\n      renderColumnContainer,\n      columnContainerProps\n    },\n    column.map(({ photo, layout }) => React.createElement(\n      PhotoRenderer,\n      {\n        key: photo.key || photo.src,\n        photo,\n        layout,\n        layoutOptions,\n        renderPhoto,\n        imageProps\n      }\n    ))\n  )));\n}\nfunction computeMasonryLayout(props) {\n  const { photos, layoutOptions } = props;\n  const { columns, spacing, padding, containerWidth } = layoutOptions;\n  const columnWidth = (containerWidth - spacing * (columns - 1) - 2 * padding * columns) / columns;\n  if (columnWidth <= 0) {\n    return columns > 1 ? computeMasonryLayout({\n      ...props,\n      layoutOptions: { ...layoutOptions, columns: columns - 1 }\n    }) : void 0;\n  }\n  const columnsCurrentTopPositions = [];\n  for (let i = 0; i < columns; i += 1) {\n    columnsCurrentTopPositions[i] = 0;\n  }\n  const columnsModel = photos.reduce(\n    (model, photo, index) => {\n      const shortestColumn = columnsCurrentTopPositions.reduce(\n        (currentShortestColumn, item, i) => item < columnsCurrentTopPositions[currentShortestColumn] - 1 ? i : currentShortestColumn,\n        0\n      );\n      columnsCurrentTopPositions[shortestColumn] = columnsCurrentTopPositions[shortestColumn] + columnWidth / ratio(photo) + spacing + 2 * padding;\n      model[shortestColumn].push({ photo, index });\n      return model;\n    },\n    Array.from({ length: columns }).map(() => [])\n  );\n  return columnsModel.map(\n    (column) => column.map(({ photo, index }, photoIndex) => ({\n      photo,\n      layout: {\n        width: columnWidth,\n        height: columnWidth / ratio(photo),\n        index,\n        photoIndex,\n        photosCount: column.length\n      }\n    }))\n  );\n}\nfunction MasonryLayout(props) {\n  const {\n    photos,\n    layoutOptions,\n    renderPhoto,\n    renderColumnContainer,\n    componentsProps: { imageProps, columnContainerProps }\n  } = props;\n  const masonryLayout = computeMasonryLayout({ photos, layoutOptions });\n  if (!masonryLayout) return null;\n  return React.createElement(React.Fragment, null, masonryLayout.map((column, columnIndex) => React.createElement(\n    ColumnContainerRenderer,\n    {\n      key: `masonry-column-${columnIndex}`,\n      layoutOptions,\n      columnsCount: masonryLayout.length,\n      columnIndex,\n      renderColumnContainer,\n      columnContainerProps\n    },\n    column.map(({ photo, layout }) => React.createElement(\n      PhotoRenderer,\n      {\n        key: photo.key || photo.src,\n        photo,\n        layout,\n        layoutOptions,\n        renderPhoto,\n        imageProps\n      }\n    ))\n  )));\n}\nfunction defaultRenderContainer({ containerProps, children, containerRef }) {\n  return React.createElement(\"div\", { ref: containerRef, ...containerProps }, children);\n}\nfunction ContainerRenderer(props) {\n  const {\n    layout,\n    renderContainer,\n    children,\n    containerRef,\n    containerProps: { style, className, ...restContainerProps } = {}\n  } = props;\n  const containerProps = {\n    className: clsx(\"react-photo-album\", `react-photo-album--${layout}`, className),\n    style: {\n      display: \"flex\",\n      flexWrap: \"nowrap\",\n      justifyContent: \"space-between\",\n      flexDirection: layout === \"rows\" ? \"column\" : \"row\",\n      ...style\n    },\n    ...restContainerProps\n  };\n  return React.createElement(React.Fragment, null, (renderContainer != null ? renderContainer : defaultRenderContainer)({\n    containerProps,\n    containerRef,\n    layout,\n    children\n  }));\n}\nfunction useArray(array) {\n  const ref = React.useRef(array);\n  if (!array || !ref.current || array.join() !== ref.current.join()) {\n    ref.current = array;\n  }\n  return ref.current;\n}\nfunction containerWidthReducer(state, { newContainerWidth, newScrollbarWidth }) {\n  const { containerWidth, scrollbarWidth } = state;\n  if (containerWidth !== void 0 && scrollbarWidth !== void 0 && newContainerWidth !== void 0 && newScrollbarWidth !== void 0 && newContainerWidth > containerWidth && newContainerWidth - containerWidth <= 20 && newScrollbarWidth < scrollbarWidth) {\n    return { containerWidth, scrollbarWidth: newScrollbarWidth };\n  }\n  return containerWidth !== newContainerWidth || scrollbarWidth !== newScrollbarWidth ? { containerWidth: newContainerWidth, scrollbarWidth: newScrollbarWidth } : state;\n}\nfunction resolveContainerWidth(el, breakpoints2) {\n  let width = el == null ? void 0 : el.clientWidth;\n  if (width !== void 0 && breakpoints2 && breakpoints2.length > 0) {\n    const sorted = [...breakpoints2.filter((x) => x > 0)].sort((a, b) => b - a);\n    sorted.push(Math.floor(sorted[sorted.length - 1] / 2));\n    const threshold = width;\n    width = sorted.find((breakpoint, index) => breakpoint <= threshold || index === sorted.length - 1);\n  }\n  return width;\n}\nfunction useContainerWidth(breakpoints2, defaultContainerWidth) {\n  const [{ containerWidth }, dispatch] = React.useReducer(containerWidthReducer, {\n    containerWidth: defaultContainerWidth\n  });\n  const ref = React.useRef(null);\n  const observerRef = React.useRef();\n  const containerRef = React.useCallback(\n    (node) => {\n      var _a;\n      (_a = observerRef.current) == null ? void 0 : _a.disconnect();\n      observerRef.current = void 0;\n      ref.current = node;\n      const updateWidth = () => dispatch({\n        newContainerWidth: resolveContainerWidth(ref.current, breakpoints2),\n        newScrollbarWidth: window.innerWidth - document.documentElement.clientWidth\n      });\n      updateWidth();\n      if (node && typeof ResizeObserver !== \"undefined\") {\n        observerRef.current = new ResizeObserver(updateWidth);\n        observerRef.current.observe(node);\n      }\n    },\n    [breakpoints2]\n  );\n  return { containerRef, containerWidth };\n}\nconst breakpoints = Object.freeze([1200, 600, 300, 0]);\nfunction unwrap(value, arg) {\n  return typeof value === \"function\" ? value(arg) : value;\n}\nfunction unwrapParameter(value, containerWidth) {\n  return typeof value !== \"undefined\" ? unwrap(value, containerWidth) : void 0;\n}\nfunction selectResponsiveValue(values, containerWidth) {\n  const index = breakpoints.findIndex((breakpoint) => breakpoint <= containerWidth);\n  return unwrap(values[index >= 0 ? index : 0], containerWidth);\n}\nfunction resolveResponsiveParameter(parameter, containerWidth, values, minValue = 0) {\n  const value = unwrapParameter(parameter, containerWidth);\n  return Math.round(Math.max(value === void 0 ? selectResponsiveValue(values, containerWidth) : value, minValue));\n}\nfunction resolveLayoutOptions({\n  layout,\n  onClick,\n  containerWidth,\n  targetRowHeight,\n  rowConstraints,\n  columns,\n  spacing,\n  padding,\n  sizes\n}) {\n  return {\n    layout,\n    onClick,\n    containerWidth,\n    columns: resolveResponsiveParameter(columns, containerWidth, [5, 4, 3, 2], 1),\n    spacing: resolveResponsiveParameter(spacing, containerWidth, [20, 15, 10, 5]),\n    padding: resolveResponsiveParameter(padding, containerWidth, [0, 0, 0, 0, 0]),\n    targetRowHeight: resolveResponsiveParameter(targetRowHeight, containerWidth, [\n      (w) => w / 5,\n      (w) => w / 4,\n      (w) => w / 3,\n      (w) => w / 2\n    ]),\n    rowConstraints: unwrapParameter(rowConstraints, containerWidth),\n    sizes\n  };\n}\nfunction resolveComponentsProps(props, containerWidth, layoutOptions) {\n  const { photos, componentsProps: componentsPropsProp } = props;\n  const componentsProps = unwrap(componentsPropsProp, containerWidth) || {};\n  if (layoutOptions) {\n    const { layout, spacing, padding, rowConstraints } = layoutOptions;\n    if (layout === \"rows\") {\n      const { singleRowMaxHeight } = rowConstraints || {};\n      if (singleRowMaxHeight) {\n        const maxWidth = Math.floor(\n          photos.reduce(\n            (acc, { width, height }) => acc + width / height * singleRowMaxHeight - 2 * padding,\n            padding * photos.length * 2 + spacing * (photos.length - 1)\n          )\n        );\n        if (maxWidth > 0) {\n          componentsProps.containerProps = componentsProps.containerProps || {};\n          componentsProps.containerProps.style = { maxWidth, ...componentsProps.containerProps.style };\n        }\n      }\n    }\n  }\n  return componentsProps;\n}\nfunction renderLayout(props, componentsProps, layoutOptions) {\n  const { photos, layout, renderPhoto, renderRowContainer, renderColumnContainer } = props;\n  const commonLayoutProps = { photos, renderPhoto, componentsProps };\n  if (layout === \"rows\") {\n    return React.createElement(\n      RowsLayout,\n      {\n        layoutOptions,\n        renderRowContainer,\n        ...commonLayoutProps\n      }\n    );\n  }\n  if (layout === \"columns\") {\n    return React.createElement(\n      ColumnsLayout,\n      {\n        layoutOptions,\n        renderColumnContainer,\n        ...commonLayoutProps\n      }\n    );\n  }\n  return React.createElement(\n    MasonryLayout,\n    {\n      layoutOptions,\n      renderColumnContainer,\n      ...commonLayoutProps\n    }\n  );\n}\nfunction PhotoAlbum(props) {\n  const { photos, layout, renderContainer, defaultContainerWidth, breakpoints: breakpoints2 } = props;\n  const { containerRef, containerWidth } = useContainerWidth(useArray(breakpoints2), defaultContainerWidth);\n  if (!layout || ![\"rows\", \"columns\", \"masonry\"].includes(layout) || !Array.isArray(photos)) return null;\n  const layoutOptions = containerWidth ? resolveLayoutOptions({ containerWidth, ...props }) : void 0;\n  const componentsProps = resolveComponentsProps(props, containerWidth, layoutOptions);\n  return React.createElement(\n    ContainerRenderer,\n    {\n      layout,\n      containerRef,\n      renderContainer,\n      containerProps: componentsProps.containerProps\n    },\n    layoutOptions && renderLayout(props, componentsProps, layoutOptions)\n  );\n}\nexport {\n  PhotoAlbum,\n  PhotoAlbum as default,\n  computeColumnsLayout as unstable_computeColumnsLayout,\n  computeMasonryLayout as unstable_computeMasonryLayout,\n  computeRowsLayout as unstable_computeRowsLayout\n};\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * External dependencies\n */\nimport PropTypes from 'prop-types';\nimport { useCallback } from '@googleforcreators/react';\nimport { __ } from '@googleforcreators/i18n';\nimport { trackError } from '@googleforcreators/tracking';\nimport { Text, TextSize, useSnackbar } from '@googleforcreators/design-system';\n\n/**\n * Internal dependencies\n */\nimport { useAPI } from '../../../../../app/api';\nimport { useLocalMedia } from '../../../../../app/media';\nimport { useStory } from '../../../../../app/story';\nimport Dialog from '../../../../dialog';\n\n/**\n * Display a confirmation dialog for when a user wants to delete a media element.\n *\n * @param {Object} props Component props.\n * @param {number} props.mediaId Selected media element's ID.\n * @param {string} props.type Selected media element's type.\n * @param {Function} props.onClose Callback to toggle dialog display on close.\n * @return {null|*} The dialog element.\n */\nfunction DeleteDialog({ mediaId, type, onClose }) {\n  const {\n    actions: { deleteMedia },\n  } = useAPI();\n  const { showSnackbar } = useSnackbar();\n  const { deleteMediaElement } = useLocalMedia(\n    ({ actions: { deleteMediaElement } }) => ({\n      deleteMediaElement,\n    })\n  );\n  const { deleteElementsByResourceId } = useStory((state) => ({\n    deleteElementsByResourceId: state.actions.deleteElementsByResourceId,\n  }));\n\n  const onDelete = useCallback(async () => {\n    onClose();\n    try {\n      await deleteMedia(mediaId);\n      deleteMediaElement({ id: mediaId });\n      deleteElementsByResourceId({ id: mediaId });\n    } catch (err) {\n      trackError('local_media_deletion', err.message);\n      showSnackbar({\n        message: __('Failed to delete media item.', 'web-stories'),\n        dismissible: true,\n      });\n    }\n  }, [\n    deleteMedia,\n    deleteMediaElement,\n    deleteElementsByResourceId,\n    mediaId,\n    onClose,\n    showSnackbar,\n  ]);\n\n  const imageDialogTitle = __('Delete Image?', 'web-stories');\n  const videoDialogTitle = __('Delete Video?', 'web-stories');\n  const imageDialogDescription = __(\n    'You are about to permanently delete this image from your site. The image will appear broken in any content that uses it.',\n    'web-stories'\n  );\n  const videoDialogDescription = __(\n    'You are about to permanently delete this video from your site. The video will appear broken in any content that uses it.',\n    'web-stories'\n  );\n\n  // Keep icon and menu displayed if menu is open (even if user's mouse leaves the area).\n  return (\n    <Dialog\n      isOpen\n      onClose={onClose}\n      title={type === 'image' ? imageDialogTitle : videoDialogTitle}\n      secondaryText={__('Cancel', 'web-stories')}\n      onPrimary={onDelete}\n      primaryText={__('Delete', 'web-stories')}\n      maxWidth={512}\n    >\n      <Text.Paragraph size={TextSize.Small}>\n        {type === 'image' ? imageDialogDescription : videoDialogDescription}\n      </Text.Paragraph>\n      <Text.Paragraph size={TextSize.Small} isBold>\n        {__('This action can not be undone.', 'web-stories')}\n      </Text.Paragraph>\n    </Dialog>\n  );\n}\n\nDeleteDialog.propTypes = {\n  mediaId: PropTypes.number.isRequired,\n  type: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default DeleteDialog;\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * External dependencies\n */\nimport styled, { css } from 'styled-components';\nimport PropTypes from 'prop-types';\nimport { useCallback, useState } from '@googleforcreators/react';\nimport { formatDate, toDate, isValid } from '@googleforcreators/date';\nimport { __, sprintf } from '@googleforcreators/i18n';\nimport { trackError } from '@googleforcreators/tracking';\nimport {\n  getSmallestUrlForWidth,\n  ResourcePropTypes,\n} from '@googleforcreators/media';\nimport {\n  Text,\n  TextArea,\n  TextSize,\n  useSnackbar,\n} from '@googleforcreators/design-system';\n\n/**\n * Internal dependencies\n */\nimport { useAPI } from '../../../../../app/api';\nimport { useLocalMedia } from '../../../../../app/media';\nimport Dialog from '../../../../dialog';\n\nconst THUMBNAIL_WIDTH = 152;\n\nconst styledMediaThumbnail = css`\n  display: flex;\n  width: ${THUMBNAIL_WIDTH}px;\n  margin-right: 28px;\n`;\n\nconst Image = styled.img`\n  ${styledMediaThumbnail}\n`;\n\nconst Video = styled.video`\n  ${styledMediaThumbnail}\n`;\n\nconst DialogBody = styled.div`\n  display: flex;\n  justify-content: left;\n  align-items: flex-start;\n`;\n\nconst MetadataTextContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin: 0 4px;\n`;\n\nconst DateText = styled(Text.Span)`\n  margin-bottom: 8px;\n`;\n\nconst AssistiveTextArea = styled(TextArea)`\n  margin: 20px 0 4px;\n`;\n\nconst imageDialogTitle = __('Edit Image', 'web-stories');\nconst videoDialogTitle = __('Edit Video', 'web-stories');\nconst imageInputTitle = __('Assistive text', 'web-stories');\nconst videoInputTitle = __('Video description', 'web-stories');\nconst imageDialogDescription = __(\n  'Describe the appearance and function of the image. Leave empty if the image is purely decorative.',\n  'web-stories'\n);\nconst videoDialogDescription = __(\n  'For indexability and accessibility. Include any burned-in text inside the video.',\n  'web-stories'\n);\n\n/**\n * Displays a dialog where the user can edit the selected media element.\n *\n * @param {Object} props Component props.\n * @param {Object} props.resource Selected media element's resource object.\n * @param {Object} props.onClose Callback to toggle dialog display.\n * @return {null|*} The dialog element.\n */\nfunction MediaEditDialog({ resource, onClose }) {\n  const { id, src, creationDate, width, height, type, alt, poster, mimeType } =\n    resource;\n  const {\n    actions: { updateMedia },\n  } = useAPI();\n  const { updateMediaElement } = useLocalMedia(\n    ({ actions: { updateMediaElement } }) => ({\n      updateMediaElement,\n    })\n  );\n  const { showSnackbar } = useSnackbar();\n  const [altText, setAltText] = useState(alt);\n  const parsedDate = toDate(creationDate);\n\n  const handleAltTextChange = useCallback((evt) => {\n    setAltText(evt.target.value);\n  }, []);\n\n  const updateMediaItem = useCallback(async () => {\n    try {\n      // Update server.\n      await updateMedia(id, { altText });\n      // Update internal state.\n      updateMediaElement({ id, data: { alt: altText } });\n      onClose();\n    } catch (err) {\n      trackError('local_media_edit', err.message);\n      showSnackbar({\n        message: __('Failed to update, please try again.', 'web-stories'),\n        dismissible: true,\n      });\n    }\n  }, [altText, id, onClose, showSnackbar, updateMedia, updateMediaElement]);\n\n  const isImage = type === 'image';\n\n  return (\n    <Dialog\n      isOpen\n      onClose={onClose}\n      title={isImage ? imageDialogTitle : videoDialogTitle}\n      secondaryText={__('Cancel', 'web-stories')}\n      onPrimary={updateMediaItem}\n      primaryText={__('Save', 'web-stories')}\n    >\n      <DialogBody>\n        {type === 'image' ? (\n          <Image\n            src={getSmallestUrlForWidth(THUMBNAIL_WIDTH, resource)}\n            alt={alt}\n            loading={'lazy'}\n            crossOrigin=\"anonymous\"\n            decoding=\"async\"\n          />\n        ) : (\n          <Video\n            key={src}\n            crossOrigin=\"anonymous\"\n            poster={poster}\n            preload=\"metadata\"\n            muted\n          >\n            <source src={src} type={mimeType} />\n          </Video>\n        )}\n        <MetadataTextContainer>\n          {isValid(parsedDate) && (\n            <DateText size={TextSize.XSmall}>\n              {sprintf(\n                /* translators: %s: upload date of media item. */\n                __('Uploaded: %s', 'web-stories'),\n                formatDate(creationDate)\n              )}\n            </DateText>\n          )}\n          <Text.Span size={TextSize.Small}>\n            {sprintf(\n              /* translators: 1: image width. 2: image height. */\n              __('%1$d x %2$d pixels', 'web-stories'),\n              width,\n              height\n            )}\n          </Text.Span>\n          <AssistiveTextArea\n            value={altText}\n            aria-label={isImage ? imageInputTitle : videoInputTitle}\n            type=\"text\"\n            placeholder={isImage ? imageInputTitle : videoInputTitle}\n            onChange={handleAltTextChange}\n          />\n          <Text.Paragraph size={TextSize.Small}>\n            {isImage ? imageDialogDescription : videoDialogDescription}\n          </Text.Paragraph>\n        </MetadataTextContainer>\n      </DialogBody>\n    </Dialog>\n  );\n}\n\nMediaEditDialog.propTypes = {\n  resource: ResourcePropTypes.resource.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default MediaEditDialog;\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * External dependencies\n */\nimport styled, { css } from 'styled-components';\nimport PropTypes from 'prop-types';\nimport {\n  useCallback,\n  useRef,\n  useState,\n  useMemo,\n} from '@googleforcreators/react';\nimport { __ } from '@googleforcreators/i18n';\nimport { v4 as uuidv4 } from 'uuid';\nimport {\n  Icons,\n  Menu,\n  Placement,\n  Popup,\n  noop,\n} from '@googleforcreators/design-system';\n\n/**\n * Internal dependencies\n */\nimport { useLocalMedia } from '../../../../../app';\nimport { ActionButton } from '../../shared';\nimport DropDownKeyEvents from '../../../../panels/utils/dropDownKeyEvents';\nimport DeleteDialog from './deleteDialog';\nimport MediaEditDialog from './mediaEditDialog';\n\nconst MoreButton = styled(ActionButton)`\n  top: 4px;\n  right: 4px;\n`;\n\nconst DropDownContainer = styled.div`\n  margin-top: 10px;\n`;\n\nconst MenuContainer = styled.div`\n  z-index: 1;\n`;\n\nconst menuStylesOverride = css`\n  min-width: 160px;\n  margin-top: 0;\n  li {\n    display: block;\n  }\n`;\n\nconst MENU_OPTIONS = {\n  EDIT: 'edit',\n  DELETE: 'delete',\n};\n\n/**\n * Get a More icon that displays a dropdown menu on click.\n *\n * @param {Object} props Component props.\n * @param {Object} props.resource Selected media element's resource object.\n * @param {boolean} props.display Whether the more icon should be displayed.\n * @param {boolean} props.isMenuOpen If the dropdown menu is open.\n * @param {Function} props.onMenuOpen Callback for when menu is opened.\n * @param {Function} props.onMenuCancelled Callback for when menu is closed without any selections.\n * @param {Function} props.onMenuSelected Callback for when menu is closed and an option selected.\n * @param {Function} props.setParentActive Sets the parent element active.\n * @return {null|*} Element or null if should not display the More icon.\n */\nfunction DropDownMenu({\n  resource,\n  display,\n  isMenuOpen,\n  onMenuOpen,\n  onMenuCancelled,\n  onMenuSelected,\n  setParentActive = noop,\n}) {\n  const groups = [\n    {\n      options: [\n        {\n          label: __('Edit meta data', 'web-stories'),\n          value: MENU_OPTIONS.EDIT,\n        },\n        {\n          label: __('Delete from library', 'web-stories'),\n          value: MENU_OPTIONS.DELETE,\n        },\n      ],\n    },\n  ];\n\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\n  const [showEditDialog, setShowEditDialog] = useState(false);\n  const moreButtonRef = useRef();\n\n  const onClose = useCallback(() => {\n    onMenuCancelled();\n    moreButtonRef.current?.focus();\n    // Activeness of the parent is lost then due to blurring, we need to set it active \"manually\"\n    // to focus back on the original button.\n    setParentActive();\n  }, [onMenuCancelled, setParentActive]);\n\n  const { canTranscodeResource } = useLocalMedia(\n    ({ state: { canTranscodeResource } }) => ({\n      canTranscodeResource,\n    })\n  );\n\n  const handleCurrentValue = (evt, value) => {\n    onMenuSelected();\n    switch (value) {\n      case MENU_OPTIONS.EDIT:\n        setShowEditDialog(true);\n        break;\n      case MENU_OPTIONS.DELETE:\n        setShowDeleteDialog(true);\n        break;\n      default:\n        break;\n    }\n  };\n\n  // On Delete dialog closing.\n  const onDeleteDialogClose = useCallback(() => {\n    setShowDeleteDialog(false);\n    onClose();\n  }, [setShowDeleteDialog, onClose]);\n\n  // On Edit dialog closing.\n  const onEditDialogClose = useCallback(() => {\n    setShowEditDialog(false);\n    onClose();\n  }, [setShowEditDialog, onClose]);\n\n  const listId = useMemo(() => `list-${uuidv4()}`, []);\n  const buttonId = useMemo(() => `button-${uuidv4()}`, []);\n\n  // Keep icon and menu displayed if menu is open (even if user's mouse leaves the area).\n  return (\n    canTranscodeResource(resource) && ( // Don't show menu if resource is being processed.\n      <MenuContainer>\n        {moreButtonRef.current && (\n          <DropDownKeyEvents target={moreButtonRef.current} />\n        )}\n        <MoreButton\n          ref={moreButtonRef}\n          onClick={onMenuOpen}\n          aria-label={__('More', 'web-stories')}\n          aria-pressed={isMenuOpen}\n          aria-haspopup\n          aria-expanded={isMenuOpen}\n          aria-owns={isMenuOpen ? listId : null}\n          id={buttonId}\n          $display={display}\n          tabIndex={display || isMenuOpen ? 0 : -1}\n        >\n          <Icons.DotsFillSmall />\n        </MoreButton>\n        {(display || isMenuOpen) && (\n          <Popup\n            anchor={moreButtonRef}\n            placement={Placement.BottomStart}\n            isOpen={isMenuOpen}\n          >\n            <DropDownContainer>\n              <Menu\n                parentId={buttonId}\n                listId={listId}\n                handleMenuItemSelect={handleCurrentValue}\n                groups={groups}\n                onDismissMenu={onClose}\n                hasMenuRole\n                menuStylesOverride={menuStylesOverride}\n              />\n            </DropDownContainer>\n          </Popup>\n        )}\n        {showDeleteDialog && (\n          <DeleteDialog\n            mediaId={resource.id}\n            type={resource.type}\n            onClose={onDeleteDialogClose}\n          />\n        )}\n        {showEditDialog && (\n          <MediaEditDialog resource={resource} onClose={onEditDialogClose} />\n        )}\n      </MenuContainer>\n    )\n  );\n}\n\nDropDownMenu.propTypes = {\n  resource: PropTypes.object.isRequired,\n  display: PropTypes.bool.isRequired,\n  isMenuOpen: PropTypes.bool.isRequired,\n  onMenuOpen: PropTypes.func.isRequired,\n  onMenuCancelled: PropTypes.func.isRequired,\n  onMenuSelected: PropTypes.func.isRequired,\n  setParentActive: PropTypes.func,\n};\n\nexport default DropDownMenu;\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * External dependencies\n */\nimport styled from 'styled-components';\nimport PropTypes from 'prop-types';\nimport { rgba } from 'polished';\nimport { useState } from '@googleforcreators/react';\nimport { Text, TextSize } from '@googleforcreators/design-system';\n\nconst StyledText = styled(Text.Span)`\n  color: ${({ theme, active }) =>\n    rgba(theme.colors.standard.white, active ? 1.0 : 0.6)};\n`;\n\nconst Link = styled.a`\n  display: block;\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  padding: 8px;\n  background-color: ${({ theme, active }) =>\n    rgba(theme.colors.bg.primary, active ? 0.8 : 0.6)};\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  text-decoration: none;\n`;\n\nconst Attribution = ({ author, url }) => {\n  const [active, setActive] = useState(false);\n  const makeActive = () => setActive(true);\n  const makeInactive = () => setActive(false);\n\n  return (\n    <Link\n      title={author}\n      active={active}\n      onPointerEnter={makeActive}\n      onFocus={makeActive}\n      onPointerLeave={makeInactive}\n      onBlur={makeInactive}\n      href={url}\n      target=\"_blank\"\n      rel=\"noreferrer\"\n    >\n      <StyledText size={TextSize.XSmall}>{author}</StyledText>\n    </Link>\n  );\n};\n\nAttribution.propTypes = {\n  author: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n};\n\nexport default Attribution;\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * External dependencies\n */\nimport styled, { css } from 'styled-components';\nimport { useEffect, useRef, memo } from '@googleforcreators/react';\nimport PropTypes from 'prop-types';\nimport {\n  getSmallestUrlForWidth,\n  resourceList,\n  ResourcePropTypes,\n} from '@googleforcreators/media';\nimport { Icons, Text, TextSize, noop } from '@googleforcreators/design-system';\n\n/**\n * Internal dependencies\n */\nimport LibraryMoveable from '../../shared/libraryMoveable';\nimport { useDropTargets } from '../../../../dropTargets';\nimport { ContentType } from '../../../../../app/media';\nimport InsertionOverlay from '../../shared/insertionOverlay';\n\nconst styledTiles = css`\n  width: 100%;\n  cursor: pointer;\n  transition:\n    0.2s transform,\n    0.15s opacity;\n  border-radius: 4px;\n  opacity: 0;\n  object-fit: cover;\n`;\n\nconst Image = styled.img`\n  ${styledTiles}\n`;\n\n// Display the newly uploaded videos without a delay: showWithoutDelay\nconst Video = styled.video`\n  ${styledTiles}\n  ${({ showWithoutDelay }) => (showWithoutDelay ? 'opacity: 1;' : '')}\n`;\n\nconst DurationWrapper = styled.div`\n  position: absolute;\n  bottom: 8px;\n  left: 8px;\n  background: ${({ theme }) => theme.colors.opacity.black64};\n  border-radius: 100px;\n  height: 18px;\n  padding: 0 6px;\n`;\nconst MuteWrapper = styled.div`\n  position: absolute;\n  bottom: 8px;\n  right: 8px;\n  height: 24px;\n  width: 24px;\n  background: ${({ theme }) => theme.colors.opacity.black64};\n  color: ${({ theme }) => theme.colors.fg.primary};\n  border-radius: 100px;\n`;\nconst Duration = styled(Text.Span).attrs({\n  size: TextSize.XSmall,\n})`\n  color: ${({ theme }) => theme.colors.fg.primary};\n  display: block;\n`;\n\nconst CloneImg = styled.img`\n  opacity: 0;\n  width: ${({ width }) => `${width}px`};\n  height: ${({ height }) => `${height}px`};\n  position: absolute;\n`;\n\nfunction InnerElement({\n  type,\n  src,\n  resource,\n  alt,\n  width,\n  height,\n  onClick,\n  onLoad = noop,\n  showVideoDetail,\n  mediaElement,\n  active,\n  isMuted,\n}) {\n  const newVideoPosterRef = useRef(null);\n  // Track if we have already set the dragging resource.\n  const hasSetResourceTracker = useRef(null);\n\n  // Note: This `useDropTargets` is purposefully separated from the one below since it\n  // uses a custom function for checking for equality and is meant for `handleDrag` and `handleDrop` only.\n  const { handleDrag, handleDrop } = useDropTargets(\n    ({ state, actions }) => ({\n      handleDrag: actions.handleDrag,\n      handleDrop: actions.handleDrop,\n      dropTargets: state.dropTargets,\n      activeDropTargetId: state.activeDropTargetId,\n    }),\n    (prev, curr) => {\n      // If we're dragging this element, always update the actions.\n      if (hasSetResourceTracker.current) {\n        return false;\n        // If we're rendering the first time, init `handleDrag` and `handleDrop`.\n      } else if (hasSetResourceTracker.current === null) {\n        hasSetResourceTracker.current = false;\n        return false;\n      }\n      // If the drop targets updated meanwhile, also update the actions, otherwise `handleDrag` won't consider those.\n      if (prev?.dropTargets && curr?.dropTargets) {\n        const prevIds = Object.keys(prev.dropTargets);\n        const currentIds = Object.keys(curr.dropTargets);\n        if (prevIds.join() !== currentIds.join()) {\n          return false;\n        }\n      }\n\n      if (prev?.activeDropTargetId !== curr?.activeDropTargetId) {\n        return false;\n      }\n\n      // Otherwise ignore the changes in the actions.\n      return true;\n    }\n  );\n\n  const { setDraggingResource } = useDropTargets(\n    ({ actions: { setDraggingResource } }) => ({\n      setDraggingResource,\n    })\n  );\n\n  useEffect(() => {\n    // assign display poster for videos\n    if (resource.poster) {\n      newVideoPosterRef.current = resource.poster;\n    }\n  }, [resource.poster]);\n\n  const makeMediaVisible = () => {\n    if (mediaElement.current) {\n      mediaElement.current.style.opacity = 1;\n    }\n    onLoad();\n  };\n\n  let media;\n  const { lengthFormatted, poster, mimeType } = resource;\n  const displayPoster = poster ?? newVideoPosterRef.current;\n  const thumbnailURL = displayPoster\n    ? displayPoster\n    : getSmallestUrlForWidth(width, resource);\n\n  const commonProps = {\n    width,\n    height,\n    alt,\n    crossOrigin: 'anonymous',\n  };\n\n  const commonImageProps = {\n    ...commonProps,\n    onLoad: makeMediaVisible,\n    loading: 'lazy',\n    decoding: 'async',\n    draggable: false,\n  };\n\n  const cloneProps = {\n    ...commonImageProps,\n    onLoad: undefined,\n  };\n\n  const imageProps = {\n    ...commonImageProps,\n    src: thumbnailURL,\n  };\n  const videoProps = {\n    ...commonProps,\n    title: alt,\n    alt: null,\n    loop: type === ContentType.Gif,\n    muted: true,\n    preload: 'metadata',\n    poster: displayPoster,\n    showWithoutDelay: active,\n  };\n\n  if (type === ContentType.Image || type === ContentType.Sticker) {\n    // eslint-disable-next-line styled-components-a11y/alt-text -- False positive.\n    media = <Image key={src} {...imageProps} ref={mediaElement} />;\n    cloneProps.src = thumbnailURL;\n  } else if ([ContentType.Video, ContentType.Gif].includes(type)) {\n    media = (\n      <>\n        {poster && !active ? (\n          /* eslint-disable-next-line styled-components-a11y/alt-text -- False positive. */\n          <Image key={src} {...imageProps} ref={mediaElement} />\n        ) : (\n          // eslint-disable-next-line jsx-a11y/media-has-caption,styled-components-a11y/media-has-caption -- No captions/tracks because video is muted.\n          <Video key={src} {...videoProps} ref={mediaElement}>\n            {type === ContentType.Gif ? (\n              resource.output.src && (\n                <source\n                  src={resource.output.src}\n                  type={resource.output.mimeType}\n                />\n              )\n            ) : (\n              <source\n                src={getSmallestUrlForWidth(width, resource)}\n                type={mimeType}\n              />\n            )}\n          </Video>\n        )}\n        {type === ContentType.Video && showVideoDetail && lengthFormatted && (\n          <DurationWrapper>\n            <Duration>{lengthFormatted}</Duration>\n          </DurationWrapper>\n        )}\n        {type === ContentType.Video && showVideoDetail && isMuted && (\n          <MuteWrapper>\n            <Icons.Muted />\n          </MuteWrapper>\n        )}\n      </>\n    );\n    cloneProps.src = poster;\n  }\n\n  if (!media) {\n    throw new Error('Invalid media element type.');\n  }\n\n  const dragHandler = (event) => {\n    if (!hasSetResourceTracker.current) {\n      // Drop-targets handling.\n      resourceList.set(resource.id, {\n        url: thumbnailURL,\n        type: 'cached',\n      });\n      setDraggingResource(resource);\n      hasSetResourceTracker.current = true;\n    }\n    handleDrag(resource, event.clientX, event.clientY);\n  };\n\n  const imageURL = type === ContentType.Image ? thumbnailURL : poster;\n\n  return (\n    <>\n      {media}\n      {active && <InsertionOverlay showIcon={false} />}\n      <LibraryMoveable\n        active={active}\n        handleDrag={dragHandler}\n        handleDragEnd={() => {\n          handleDrop(resource);\n          hasSetResourceTracker.current = false;\n        }}\n        type={resource.type}\n        elementProps={{ resource }}\n        onClick={onClick(imageURL)}\n        cloneElement={CloneImg}\n        cloneProps={cloneProps}\n      />\n    </>\n  );\n}\n\nInnerElement.propTypes = {\n  type: PropTypes.string.isRequired,\n  src: PropTypes.string.isRequired,\n  resource: ResourcePropTypes.imageResource,\n  alt: PropTypes.string,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  isMuted: PropTypes.bool,\n  onClick: PropTypes.func.isRequired,\n  onLoad: PropTypes.func,\n  showVideoDetail: PropTypes.bool,\n  mediaElement: PropTypes.object,\n  active: PropTypes.bool.isRequired,\n};\n\nexport default memo(InnerElement);\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * External dependencies\n */\nimport styled, { css } from 'styled-components';\nimport PropTypes from 'prop-types';\nimport {\n  useRef,\n  useMemo,\n  useCallback,\n  useState,\n} from '@googleforcreators/react';\nimport { __ } from '@googleforcreators/i18n';\nimport { v4 as uuidv4 } from 'uuid';\nimport {\n  Icons,\n  Menu,\n  Placement,\n  Popup,\n  useKeyDownEffect,\n  noop,\n} from '@googleforcreators/design-system';\nimport {\n  getSmallestUrlForWidth,\n  ResourcePropTypes,\n} from '@googleforcreators/media';\n\n/**\n * Internal dependencies\n */\nimport getElementProperties from '../../../../canvas/utils/getElementProperties';\nimport useStory from '../../../../../app/story/useStory';\nimport { ActionButton } from '../../shared';\nimport useRovingTabIndex from '../../../../../utils/useRovingTabIndex';\nimport useFocusCanvas from '../../../../canvas/useFocusCanvas';\n\nconst DropDownContainer = styled.div`\n  margin-top: 10px;\n  min-width: 160px;\n`;\n\nconst MenuContainer = styled.div`\n  z-index: 1;\n`;\n\nconst menuStylesOverride = css`\n  min-width: 160px;\n  margin-top: 0;\n  li {\n    display: block;\n  }\n`;\n\n// This is used for nested roving tab index to detect parent siblings.\nconst BUTTON_NESTING_DEPTH = 3;\nconst MENU_OPTIONS = {\n  INSERT: 'insert',\n  ADD_BACKGROUND: 'addBackground',\n};\n\n/**\n * Get a More icon that displays a dropdown menu on click.\n *\n * @param {Object} props Component props.\n * @param {Object} props.resource Selected media element's resource object.\n * @param {boolean} props.display Whether the more icon should be displayed.\n * @param {Function} props.onInsert Callback for inserting media.\n * @param {number} props.width Media width.\n * @param {number} props.index Element index in the gallery.\n * @param {boolean} props.isLocal If the menu is for local or 3p media.\n * @param {Function} props.setParentActive Sets the parent element active.\n * @param {Function} props.setParentInactive Sets the parent element inactive.\n * @return {null|*} Element or null if should not display the More icon.\n */\nfunction InsertionMenu({\n  resource,\n  display,\n  onInsert,\n  width,\n  index,\n  isLocal = false,\n  setParentActive = noop,\n  setParentInactive = noop,\n}) {\n  const insertButtonRef = useRef();\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const onMenuOpen = useCallback((e) => {\n    e.stopPropagation();\n    setIsMenuOpen(true);\n  }, []);\n  const onMenuCancelled = useCallback(() => {\n    // When menu gets closed, we want to focus back on the original button.\n    setIsMenuOpen(false);\n    insertButtonRef.current?.focus();\n    // However, activeness of the parent is also lost then due to blurring, we need to set it active \"manually\".\n    setParentActive();\n  }, [setParentActive]);\n\n  const { currentBackgroundId, combineElements } = useStory((state) => ({\n    currentBackgroundId: state.state.currentPage?.elements?.[0]?.id,\n    combineElements: state.actions.combineElements,\n  }));\n\n  const { type, poster } = resource;\n  const insertLabel = ['image', 'gif'].includes(type)\n    ? __('Insert image', 'web-stories')\n    : __('Insert video', 'web-stories');\n  const groups = [\n    {\n      options: [\n        { label: insertLabel, value: MENU_OPTIONS.INSERT },\n        {\n          label: __('Add as background', 'web-stories'),\n          value: MENU_OPTIONS.ADD_BACKGROUND,\n        },\n      ],\n    },\n  ];\n\n  const handleCurrentValue = (evt, value) => {\n    const thumbnailUrl = poster || getSmallestUrlForWidth(width, resource);\n    const newElement = getElementProperties(resource.type, {\n      resource,\n    });\n    setIsMenuOpen(false);\n    switch (value) {\n      case MENU_OPTIONS.INSERT:\n        onInsert(resource, thumbnailUrl);\n        break;\n      case MENU_OPTIONS.ADD_BACKGROUND:\n        combineElements({\n          firstElement: newElement,\n          secondId: currentBackgroundId,\n        });\n        break;\n      default:\n        break;\n    }\n    // Since the parent is set active when closing a menu, we need to set it inactive here \"manually\".\n    setParentInactive();\n  };\n\n  useRovingTabIndex({ ref: insertButtonRef }, [], BUTTON_NESTING_DEPTH);\n  // In case of 3p media, we tab out of the panel since it's the only button there.\n  const focusCanvas = useFocusCanvas();\n  useKeyDownEffect(isLocal ? null : insertButtonRef, 'tab', focusCanvas, [\n    focusCanvas,\n  ]);\n\n  const listId = useMemo(() => `list-${uuidv4()}`, []);\n  const buttonId = useMemo(() => `button-${uuidv4()}`, []);\n\n  // Keep icon and menu displayed if menu is open (even if user's mouse leaves the area).\n  return (\n    <MenuContainer>\n      <ActionButton\n        ref={insertButtonRef}\n        onClick={onMenuOpen}\n        aria-label={__('Open insertion menu', 'web-stories')}\n        aria-pressed={isMenuOpen}\n        aria-haspopup\n        aria-expanded={isMenuOpen}\n        aria-owns={isMenuOpen ? listId : null}\n        id={buttonId}\n        $display={display}\n        tabIndex={index === 0 ? 0 : -1}\n      >\n        <Icons.PlusFilledSmall />\n      </ActionButton>\n      {isMenuOpen && (\n        <Popup\n          anchor={insertButtonRef}\n          placement={Placement.BottomStart}\n          isOpen={isMenuOpen}\n        >\n          <DropDownContainer>\n            <Menu\n              parentId={buttonId}\n              listId={listId}\n              handleMenuItemSelect={handleCurrentValue}\n              groups={groups}\n              onDismissMenu={onMenuCancelled}\n              hasMenuRole\n              menuStylesOverride={menuStylesOverride}\n            />\n          </DropDownContainer>\n        </Popup>\n      )}\n    </MenuContainer>\n  );\n}\n\nInsertionMenu.propTypes = {\n  resource: ResourcePropTypes.resource.isRequired,\n  display: PropTypes.bool.isRequired,\n  onInsert: PropTypes.func.isRequired,\n  width: PropTypes.number.isRequired,\n  index: PropTypes.number.isRequired,\n  isLocal: PropTypes.bool,\n  setParentActive: PropTypes.func,\n  setParentInactive: PropTypes.func,\n};\n\nexport default InsertionMenu;\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * External dependencies\n */\nimport styled from 'styled-components';\nimport PropTypes from 'prop-types';\nimport {\n  useEffect,\n  useCallback,\n  memo,\n  useState,\n  useRef,\n} from '@googleforcreators/react';\nimport { rgba } from 'polished';\nimport { __ } from '@googleforcreators/i18n';\nimport { LoadingBar } from '@googleforcreators/design-system';\nimport { Blurhash } from 'react-blurhash';\n\n/**\n * Internal dependencies\n */\nimport DropDownMenu from '../local/dropDownMenu';\nimport { ContentType, useLocalMedia } from '../../../../../app/media';\nimport Tooltip from '../../../../tooltip';\nimport { noop } from '../../../../../utils/noop';\nimport Attribution from './attribution';\nimport InnerElement from './innerElement';\nimport InsertionMenu from './insertionMenu';\n\nconst AUTOPLAY_PREVIEW_VIDEO_DELAY_MS = 600;\n\nconst Container = styled.div.attrs((props) => ({\n  style: {\n    width: props.width + 'px',\n    height: props.height + 'px',\n    margin: props.margin,\n    backgroundColor: 'transparent',\n    color: 'inherit',\n    border: 'none',\n    padding: 0,\n  },\n}))``;\n\nconst InnerContainer = styled.div`\n  position: relative;\n  display: flex;\n  margin-bottom: 10px;\n  background-color: ${({ theme, $baseColor }) =>\n    $baseColor ? $baseColor : rgba(theme.colors.standard.black, 0.3)};\n`;\n\nconst BlurhashContainer = styled(Blurhash)`\n  position: absolute !important;\n  top: 0;\n  left: 0;\n`;\n\nfunction Element({\n  index,\n  resource,\n  width: requestedWidth,\n  height: requestedHeight,\n  margin,\n  onInsert,\n  providerType,\n  canEditMedia,\n}) {\n  const {\n    id: resourceId,\n    src,\n    type,\n    width: originalWidth,\n    height: originalHeight,\n    alt,\n    isMuted,\n    baseColor,\n    blurHash,\n  } = resource;\n\n  const { isCurrentResourceProcessing, isCurrentResourceUploading } =\n    useLocalMedia(({ state }) => ({\n      isCurrentResourceProcessing: state.isCurrentResourceProcessing,\n      isCurrentResourceUploading: state.isCurrentResourceUploading,\n    }));\n\n  const oRatio =\n    originalWidth && originalHeight ? originalWidth / originalHeight : 1;\n  const width = requestedWidth || requestedHeight / oRatio;\n  const height = requestedHeight || width / oRatio;\n\n  const mediaElement = useRef();\n  const [showVideoDetail, setShowVideoDetail] = useState(true);\n  const [active, setActive] = useState(false);\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const [isLoaded, setLoaded] = useState(false);\n\n  const makeActive = useCallback(() => setActive(true), []);\n  const makeInactive = useCallback(() => setActive(false), []);\n  const onMenuOpen = useCallback(() => setIsMenuOpen(true), []);\n  const onMenuCancelled = useCallback(() => setIsMenuOpen(false), []);\n  const onMenuSelected = useCallback(() => {\n    setIsMenuOpen(false);\n    setActive(false);\n  }, []);\n\n  const [hoverTimer, setHoverTimer] = useState(null);\n  const activeRef = useRef(active);\n  activeRef.current = active;\n\n  useEffect(() => {\n    if (![ContentType.Video, ContentType.Gif].includes(type)) {\n      return undefined;\n    }\n    const resetHoverTime = () => {\n      if (hoverTimer !== null) {\n        clearTimeout(hoverTimer);\n        setHoverTimer(null);\n      }\n    };\n    if (!isMenuOpen) {\n      if (active) {\n        setShowVideoDetail(false);\n        if (mediaElement.current && hoverTimer === null) {\n          const timer = setTimeout(() => {\n            if (activeRef.current && src) {\n              mediaElement.current.play().catch(noop);\n            }\n          }, AUTOPLAY_PREVIEW_VIDEO_DELAY_MS);\n          setHoverTimer(timer);\n          // Pointer still in the media element, continue the video.\n        }\n      } else {\n        setShowVideoDetail(true);\n        resetHoverTime();\n        if (mediaElement.current && mediaElement.current?.pause && src) {\n          // Stop video and reset position.\n          mediaElement.current.pause();\n          mediaElement.current.currentTime = 0;\n        }\n      }\n    }\n    return resetHoverTime;\n  }, [isMenuOpen, active, type, src, hoverTimer, setHoverTimer, activeRef]);\n\n  const onClick = useCallback(\n    (thumbnailUrl) => () => {\n      onInsert(resource, thumbnailUrl);\n    },\n    [onInsert, resource]\n  );\n\n  const attribution = active &&\n    resource.attribution?.author?.displayName &&\n    resource.attribution?.author?.url && (\n      <Attribution\n        author={resource.attribution.author.displayName}\n        url={resource.attribution.author.url}\n      />\n    );\n\n  const ref = useRef();\n\n  const onLoad = useCallback(() => setLoaded(true), []);\n\n  const isPlaceholder = !isLoaded && !active;\n\n  return (\n    <Container\n      ref={ref}\n      data-testid={`mediaElement-${type}`}\n      data-id={resourceId}\n      className={'mediaElement'}\n      width={width}\n      height={height}\n      margin={margin}\n      onPointerEnter={makeActive}\n      onFocus={makeActive}\n      onPointerLeave={makeInactive}\n      onBlur={makeInactive}\n      tabIndex=\"-1\"\n    >\n      <InnerContainer $baseColor={isPlaceholder && baseColor}>\n        <InnerElement\n          type={type}\n          src={src}\n          mediaElement={mediaElement}\n          resource={resource}\n          alt={alt}\n          isMuted={isMuted}\n          width={width}\n          height={height}\n          onClick={onClick}\n          onLoad={onLoad}\n          showVideoDetail={showVideoDetail}\n          active={active}\n        />\n        {attribution}\n        {isPlaceholder && blurHash && (\n          <BlurhashContainer\n            hash={blurHash}\n            width={width}\n            height={height}\n            punch={1}\n          />\n        )}\n        {(!src ||\n          isCurrentResourceProcessing(resourceId) ||\n          isCurrentResourceUploading(resourceId)) && (\n          <LoadingBar loadingMessage={__('Uploading media…', 'web-stories')} />\n        )}\n        <InsertionMenu\n          resource={resource}\n          display={active}\n          onInsert={onInsert}\n          width={width}\n          index={index}\n          isLocal={providerType === 'local'}\n          setParentActive={makeActive}\n          setParentInactive={makeInactive}\n        />\n        {providerType === 'local' && canEditMedia && (\n          <DropDownMenu\n            resource={resource}\n            display={active}\n            isMenuOpen={isMenuOpen}\n            onMenuOpen={onMenuOpen}\n            onMenuCancelled={onMenuCancelled}\n            onMenuSelected={onMenuSelected}\n            setParentActive={makeActive}\n          />\n        )}\n      </InnerContainer>\n    </Container>\n  );\n}\n\nElement.propTypes = {\n  index: PropTypes.number.isRequired,\n  resource: PropTypes.object,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  margin: PropTypes.string,\n  onInsert: PropTypes.func,\n  providerType: PropTypes.string,\n  canEditMedia: PropTypes.bool,\n};\n\n/**\n * Get a formatted element for different media types.\n *\n * @param {Object} props Component props.\n * @param {number} props.index Index of the media element in the gallery.\n * @param {Object} props.resource Resource object\n * @param {number} props.width Width that element is inserted into editor.\n * @param {number} props.height Height that element is inserted into editor.\n * @param {string?} props.margin The margin in around the element\n * @param {Function} props.onInsert Insertion callback.\n * @param {string} props.providerType Which provider the element is from.\n * @param {boolean} props.canEditMedia Current user can upload media.\n * @return {null|*} Element or null if does not map to video/image.\n */\nfunction MediaElement({\n  providerType = 'local',\n  canEditMedia = false,\n  ...props\n}) {\n  const { isCurrentResourceProcessing, isCurrentResourceUploading } =\n    useLocalMedia(({ state }) => ({\n      isCurrentResourceProcessing: state.isCurrentResourceProcessing,\n      isCurrentResourceUploading: state.isCurrentResourceUploading,\n    }));\n\n  const { id: resourceId } = props.resource;\n\n  if (\n    isCurrentResourceProcessing(resourceId) ||\n    isCurrentResourceUploading(resourceId)\n  ) {\n    return (\n      <Tooltip title={__('Uploading media…', 'web-stories')}>\n        <Element\n          {...props}\n          providerType={providerType}\n          canEditMedia={canEditMedia}\n        />\n      </Tooltip>\n    );\n  }\n\n  return (\n    <Element\n      {...props}\n      providerType={providerType}\n      canEditMedia={canEditMedia}\n    />\n  );\n}\n\nMediaElement.propTypes = {\n  index: PropTypes.number.isRequired,\n  resource: PropTypes.object,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  margin: PropTypes.string,\n  onInsert: PropTypes.func,\n  providerType: PropTypes.string,\n  canEditMedia: PropTypes.bool,\n};\n\nexport default memo(MediaElement);\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * External dependencies\n */\nimport { useCallback } from '@googleforcreators/react';\nimport PropTypes from 'prop-types';\nimport Gallery from 'react-photo-album';\n\n/**\n * Internal dependencies\n */\nimport { SIDEBAR_WIDTH } from '../../../../../constants';\nimport MediaElement from './mediaElement';\nimport { GalleryContainer } from './styles';\n\nconst PHOTO_SPACING = 8;\nconst TARGET_ROW_HEIGHT = 110;\nconst ROW_CONSTRAINTS = { maxPhotos: 2 };\n\n// eslint-disable-next-line react/prop-types -- Negligible here.\nconst ContainerRenderer = ({ children, containerRef }) => {\n  return <GalleryContainer ref={containerRef}>{children}</GalleryContainer>;\n};\n\nconst RowRenderer = ({ children }) => children;\n\n/**\n * @callback InsertionCallback\n * @param {Object} element Inserted element.\n */\n\n/**\n * Displays a gallery of media elements arranged in a row-based format.\n *\n * @param {Object} props Component props.\n * @param {Array.<Object>} props.resources List of resources to display.\n * @param {Array.<Object>} props.uploadingResources List of uploading resources to display.\n * @param {InsertionCallback} props.onInsert Called when element is selected.\n * @param {string} props.providerType Provider of gallery's elements.\n * @param {boolean} props.canEditMedia Current user can upload media.\n * @return {*} The gallery element.\n */\nfunction MediaGallery({\n  resources,\n  uploadingResources = [],\n  onInsert,\n  providerType,\n  canEditMedia = false,\n}) {\n  // Use different key for uploading vs. uploaded items to avoid confusions.\n  const photos = [\n    ...uploadingResources.map((resource) => ({\n      key: `uploading-${resource.id}`,\n      src: resource.src,\n      width: resource.width,\n      height: resource.height,\n      resource,\n    })),\n    ...resources.map((resource) => ({\n      key: resource.id,\n      src: resource.src,\n      width: resource.width,\n      height: resource.height,\n      resource,\n    })),\n  ].map((photo, index) => ({\n    ...photo,\n    index,\n  }));\n\n  const imageRenderer = useCallback(\n    ({ photo, layout }) => {\n      return (\n        <MediaElement\n          key={photo.key}\n          index={photo.index}\n          margin={`0px 0px ${PHOTO_SPACING}px 0px`}\n          resource={photo.resource}\n          width={layout.width}\n          height={layout.height}\n          onInsert={onInsert}\n          providerType={providerType}\n          canEditMedia={canEditMedia}\n        />\n      );\n    },\n    [providerType, onInsert, canEditMedia]\n  );\n\n  return (\n    <div>\n      <Gallery\n        layout=\"rows\"\n        photos={photos}\n        renderPhoto={imageRenderer}\n        renderRowContainer={RowRenderer}\n        renderContainer={ContainerRenderer}\n        targetRowHeight={TARGET_ROW_HEIGHT}\n        rowConstraints={ROW_CONSTRAINTS}\n        spacing={PHOTO_SPACING}\n        // Used for tests / SSR.\n        defaultContainerWidth={SIDEBAR_WIDTH}\n      />\n    </div>\n  );\n}\n\nMediaGallery.propTypes = {\n  resources: PropTypes.arrayOf(PropTypes.object).isRequired,\n  uploadingResources: PropTypes.arrayOf(PropTypes.object),\n  onInsert: PropTypes.func.isRequired,\n  providerType: PropTypes.string.isRequired,\n  canEditMedia: PropTypes.bool,\n};\nexport default MediaGallery;\n"],"names":["ratio","_ref","width","height","round","value","factor","arguments","length","undefined","Math","Number","EPSILON","MinHeap","constructor","comparator","this","heap","n","greater","i","j","swap","temp","swim","k","k2","floor","sink","push","element","pop","max","size","findShortestPath","graph","startNode","endNode","precedentsMap","Map","visited","Set","storedShortestPaths","set","queue","rank","el","weight","a","b","id","has","neighboringNodes","add","forEach","neighborWeight","neighbor","newWeight","currentId","get","currentWeight","buildPrecedentsMap","nodes","node","reverse","getPathFromPrecedentsMap","getCommonHeight","row","containerWidth","spacing","padding","reduce","acc","photo","cost","photos","targetRowHeight","slice","commonHeight","computeRowsLayout","_ref4","layoutOptions","rowConstraints","limitNodeSearch","_ref2","min","MAX_VALUE","findIdealNodeSearch","getNeighbors","_ref3","_a","_b","results","startOffset","minPhotos","endOffset","maxPhotos","Infinity","currentCost","makeGetRowNeighbors","path","layout","map","index","_ref5","_ref6","photoIndex","photosCount","clsx","_len","classes","Array","_key","filter","cls","Boolean","join","calcWidth","base","photoLayout","count","columns","gaps","cssPhotoWidth","calculateSizesValue","match","srcSetAndSizes","srcSet","sizes","images","concat","find","_ref7","src","sort","first","second","image","_ref8","viewport","ceil","PhotoRenderer","props","imageProps","style","className","restImageProps","renderPhoto","onClick","imageStyle","display","boxSizing","aspectRatio","marginBottom","cursor","handleClick","event","alt","title","loading","decoding","renderDefaultPhoto","options","unwrappedStyle","rest","React","wrapped","wrapperStyle","_ref9","defaultRenderRowContainer","_ref10","rowContainerProps","children","RowContainerRenderer","rowIndex","rowsCount","renderRowContainer","restRowContainerProps","flexDirection","flexWrap","alignItems","justifyContent","RowsLayout","componentsProps","rowsLayout","key","_ref11","findShortestPathLengthN","pathLength","matrix","reconstructShortestPath","currentQueue","keys","clear","accumulatedWeight","_ref12","paths","nextPath","computeShortestPath","buildColumnsModel","_ref14","columnsGaps","columnsRatios","columnsModel","totalRatio","total","columnRatio","column","totalAdjustedGaps","columnWidth","_ref15","computeColumnsModel","_ref16","targetColumnWidth","averageRatio","from","_","targetColumnHeight","_ref13","cutOffHeight","makeGetColumnNeighbors","computeLayout","findIndex","columnModel","_ref17","computeColumnsLayout","_ref18","defaultRenderColumnContainer","_ref19","columnContainerProps","cssColumnWidth","columnIndex","columnsCount","ratio2","ColumnContainerRenderer","renderColumnContainer","restColumnContainerProps","ColumnsLayout","columnsLayout","_ref20","computeMasonryLayout","columnsCurrentTopPositions","model","shortestColumn","currentShortestColumn","item","_ref21","MasonryLayout","masonryLayout","_ref22","defaultRenderContainer","_ref23","containerProps","containerRef","ref","ContainerRenderer","renderContainer","restContainerProps","containerWidthReducer","state","_ref24","newContainerWidth","newScrollbarWidth","scrollbarWidth","resolveContainerWidth","breakpoints2","clientWidth","sorted","x","threshold","breakpoint","breakpoints","Object","freeze","unwrap","arg","unwrapParameter","resolveResponsiveParameter","parameter","values","minValue","selectResponsiveValue","PhotoAlbum","defaultContainerWidth","dispatch","observerRef","current","disconnect","updateWidth","window","innerWidth","document","documentElement","ResizeObserver","observe","useContainerWidth","array","useArray","includes","isArray","_ref25","w","resolveLayoutOptions","componentsPropsProp","singleRowMaxHeight","maxWidth","_ref26","resolveComponentsProps","commonLayoutProps","renderLayout","DeleteDialog","mediaId","m","type","c","onClose","l","actions","deleteMedia","showSnackbar","y","o","deleteMediaElement","g","d","e","deleteElementsByResourceId","S","r","async","t","message","__","dismissible","R","f","E","u","isOpen","secondaryText","onPrimary","primaryText","s","Paragraph","p","Small","isBold","img","withConfig","displayName","componentId","video","div","h","Span","v","C","I","D","MediaEditDialog","resource","creationDate","P","M","T","A","poster","B","mimeType","F","updateMedia","G","updateMediaElement","N","z","V","L","O","U","target","$","altText","data","W","crossOrigin","preload","muted","XSmall","sprintf","placeholder","onChange","DropDownMenu","isMenuOpen","onMenuOpen","onMenuCancelled","onMenuSelected","setParentActive","label","focus","canTranscodeResource","q","$display","tabIndex","anchor","placement","BottomStart","parentId","listId","handleMenuItemSelect","groups","onDismissMenu","hasMenuRole","menuStylesOverride","theme","active","colors","standard","white","bg","primary","Attribution","author","url","onPointerEnter","onFocus","onPointerLeave","onBlur","href","rel","showWithoutDelay","opacity","black64","fg","attrs","onLoad","showVideoDetail","mediaElement","isMuted","handleDrag","handleDrop","dropTargets","activeDropTargetId","setDraggingResource","lengthFormatted","draggable","loop","Gif","Image","Sticker","Video","output","Error","X","showIcon","clientX","clientY","handleDragEnd","elementProps","cloneElement","cloneProps","InsertionMenu","onInsert","isLocal","setParentInactive","stopPropagation","currentBackgroundId","combineElements","currentPage","elements","firstElement","secondId","margin","backgroundColor","color","border","$baseColor","black","Element","providerType","canEditMedia","baseColor","blurHash","isCurrentResourceProcessing","isCurrentResourceUploading","H","J","K","Q","Y","Z","ee","re","clearTimeout","setTimeout","play","catch","pause","currentTime","te","oe","attribution","se","ie","ae","hash","punch","loadingMessage","RowRenderer","MediaGallery","resources","uploadingResources"],"sourceRoot":""}