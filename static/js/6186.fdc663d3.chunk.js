(self.webpackChunkwebstory_editor_starter=self.webpackChunkwebstory_editor_starter||[]).push([[6186],{708:(e,r,t)=>{"use strict";t.r(r),t.d(r,{defaultOptions:()=>o,fetchFile:()=>l,getCreateFFmpegCore:()=>n});const o={corePath:`https://unpkg.com/@ffmpeg/core@${t(48721).devDependencies["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`};var s=t(60318),a=t(60933);const i=async(e,r)=>{(0,s.log)("info",`fetch ${e}`);const t=await(await fetch(e)).arrayBuffer();(0,s.log)("info",`${e} file size = ${t.byteLength} bytes`);const o=new Blob([t],{type:r}),a=URL.createObjectURL(o);return(0,s.log)("info",`${e} blob URL = ${a}`),a},n=async e=>{let{corePath:r,workerPath:t,wasmPath:o}=e;if("undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){if("string"!==typeof r)throw Error("corePath should be a string!");const e=new URL(r,"file:///Users/abhay.pai/Projects/learn/javascript/webstory-editor-starter/node_modules/@ffmpeg/ffmpeg/src/browser/getCreateFFmpegCore.js").href,n=await i(e,"application/javascript"),l=await i(void 0!==o?o:e.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),f=await i(void 0!==t?t:e.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return"undefined"===typeof createFFmpegCore?new Promise((r=>{if(globalThis.importScripts(n),"undefined"===typeof createFFmpegCore)throw Error((0,a.CREATE_FFMPEG_CORE_IS_NOT_DEFINED)(e));(0,s.log)("info","ffmpeg-core.js script loaded"),r({createFFmpegCore:createFFmpegCore,corePath:n,wasmPath:l,workerPath:f})})):((0,s.log)("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore:createFFmpegCore,corePath:n,wasmPath:l,workerPath:f}))}if("string"!==typeof r)throw Error("corePath should be a string!");const n=new URL(r,"file:///Users/abhay.pai/Projects/learn/javascript/webstory-editor-starter/node_modules/@ffmpeg/ffmpeg/src/browser/getCreateFFmpegCore.js").href,l=await i(n,"application/javascript"),f=await i(void 0!==o?o:n.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),p=await i(void 0!==t?t:n.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return"undefined"===typeof createFFmpegCore?new Promise((e=>{const r=document.createElement("script"),t=()=>{if(r.removeEventListener("load",t),"undefined"===typeof createFFmpegCore)throw Error((0,a.CREATE_FFMPEG_CORE_IS_NOT_DEFINED)(n));(0,s.log)("info","ffmpeg-core.js script loaded"),e({createFFmpegCore:createFFmpegCore,corePath:l,wasmPath:f,workerPath:p})};r.src=l,r.type="text/javascript",r.addEventListener("load",t),document.getElementsByTagName("head")[0].appendChild(r)})):((0,s.log)("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore:createFFmpegCore,corePath:l,wasmPath:f,workerPath:p}))},l=async e=>{let r=e;if("undefined"===typeof e)return new Uint8Array;if("string"===typeof e)if(/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e))r=atob(e.split(",")[1]).split("").map((e=>e.charCodeAt(0)));else{const t=await fetch(new URL(e,"file:///Users/abhay.pai/Projects/learn/javascript/webstory-editor-starter/node_modules/@ffmpeg/ffmpeg/src/browser/fetchFile.js").href);r=await t.arrayBuffer()}else(e instanceof File||e instanceof Blob)&&(r=await(t=e,new Promise(((e,r)=>{const o=new FileReader;o.onload=()=>{e(o.result)},o.onerror=e=>{let{target:{error:{code:t}}}=e;r(Error(`File could not be read! Code=${t}`))},o.readAsArrayBuffer(t)}))));var t;return new Uint8Array(r)}},95298:e=>{e.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}}},17573:(e,r,t)=>{const{defaultArgs:o,baseOptions:s}=t(95298),a=t(67918),{defaultOptions:i,getCreateFFmpegCore:n}=t(708),{version:l}=t(48721),f=Error("ffmpeg.wasm is not ready, make sure you have completed load().");e.exports=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{log:r,logger:t,progress:p,...c}={...s,...i,...e};let m=null,g=null,d=null,h=null,u=!1,w=()=>{},b=r,F=p,y=0,E=0,j=!1,P=0;const v=(e,r)=>{w({type:e,message:r}),b&&console.log(`[${e}] ${r}`)},C=e=>{const[r,t,o]=e.split(":");return 60*parseFloat(r)*60+60*parseFloat(t)+parseFloat(o)},k=e=>{let{type:r,message:t}=e;v(r,t),((e,r)=>{if("string"===typeof e)if(e.startsWith("  Duration")){const t=e.split(", ")[0].split(": ")[1],o=C(t);r({duration:o,ratio:P}),(0===y||y>o)&&(y=o,j=!0)}else if(j&&e.startsWith("    Stream")){const r=e.match(/([\d.]+) fps/);if(r){const e=parseFloat(r[1]);E=y*e}else E=0;j=!1}else if(e.startsWith("frame")||e.startsWith("size")){const t=e.split("time=")[1].split(" ")[0],o=C(t),s=e.match(/frame=\s*(\d+)/);if(E&&s){const e=parseFloat(s[1]);P=Math.min(e/E,1)}else P=o/y;r({ratio:P,time:o})}else e.startsWith("video:")&&(r({ratio:1}),y=0)})(t,F),(e=>{"FFMPEG_END"===e&&null!==d&&(d(),d=null,h=null,u=!1)})(t)};return v("info",`use ffmpeg.wasm v${l}`),{setProgress:e=>{F=e},setLogger:e=>{w=e},setLogging:e=>{b=e},load:async()=>{if(v("info","load ffmpeg-core"),null!==m)throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");{v("info","loading ffmpeg-core");const{createFFmpegCore:e,corePath:r,workerPath:t,wasmPath:o}=await n(c);m=await e({mainScriptUrlOrBlob:r,printErr:e=>k({type:"fferr",message:e}),print:e=>k({type:"ffout",message:e}),locateFile:(e,r)=>{if("undefined"!==typeof window||"undefined"!==typeof WorkerGlobalScope){if("undefined"!==typeof o&&e.endsWith("ffmpeg-core.wasm"))return o;if("undefined"!==typeof t&&e.endsWith("ffmpeg-core.worker.js"))return t}return r+e}}),g=m.cwrap(c.mainName||"proxy_main","number",["number","number"]),v("info","ffmpeg-core loaded")}},isLoaded:()=>null!==m,run:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(v("info",`run ffmpeg command: ${r.join(" ")}`),null===m)throw f;if(u)throw Error("ffmpeg.wasm can only run one command at a time");return u=!0,new Promise(((e,t)=>{const s=[...o,...r].filter((e=>0!==e.length));d=e,h=t,g(...a(m,s))}))},exit:()=>{if(null===m)throw f;h&&h("ffmpeg has exited"),u=!1;try{m.exit(1)}catch(e){v(e.message),h&&h(e)}finally{m=null,g=null,d=null,h=null}},FS:function(e){for(var r=arguments.length,t=new Array(r>1?r-1:0),o=1;o<r;o++)t[o-1]=arguments[o];if(v("info",`run FS.${e} ${t.map((e=>"string"===typeof e?e:`<${e.length} bytes binary file>`)).join(" ")}`),null===m)throw f;{let r=null;try{r=m.FS[e](...t)}catch(s){throw"readdir"===e?Error(`ffmpeg.FS('readdir', '${t[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`):"readFile"===e?Error(`ffmpeg.FS('readFile', '${t[0]}') error. Check if the path exists`):Error("Oops, something went wrong in FS operation.")}return r}}}}},26186:(e,r,t)=>{const o=t(17573),{fetchFile:s}=t(708);e.exports={createFFmpeg:o,fetchFile:s}},60933:e=>{e.exports={CREATE_FFMPEG_CORE_IS_NOT_DEFINED:e=>`\ncreateFFmpegCore is not defined. ffmpeg.wasm is unable to find createFFmpegCore after loading ffmpeg-core.js from ${e}. Use another URL when calling createFFmpeg():\n\nconst ffmpeg = createFFmpeg({\n  corePath: 'http://localhost:3000/ffmpeg-core.js',\n});\n`}},60318:e=>{let r=!1,t=()=>{};e.exports={logging:r,setLogging:e=>{r=e},setCustomLogger:e=>{t=e},log:(e,o)=>{t({type:e,message:o}),r&&console.log(`[${e}] ${o}`)}}},67918:e=>{e.exports=(e,r)=>{const t=e._malloc(r.length*Uint32Array.BYTES_PER_ELEMENT);return r.forEach(((r,o)=>{const s=e.lengthBytesUTF8(r)+1,a=e._malloc(s);e.stringToUTF8(r,a,s),e.setValue(t+Uint32Array.BYTES_PER_ELEMENT*o,a,"i32")})),[r.length,t]}},48721:e=>{"use strict";e.exports=JSON.parse('{"name":"@ffmpeg/ffmpeg","version":"0.11.6","description":"FFmpeg WebAssembly version","main":"src/index.js","types":"src/index.d.ts","directories":{"example":"examples"},"scripts":{"start":"node scripts/server.js","start:worker":"node scripts/worker-server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","build:worker":"rimraf dist && webpack --config scripts/webpack.config.worker.prod.js","prepublishOnly":"npm run build","lint":"eslint src","wait":"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node node_modules/mocha/bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},"browser":{"./src/node/index.js":"./src/browser/index.js"},"repository":{"type":"git","url":"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},"keywords":["ffmpeg","WebAssembly","video"],"author":"Jerome Wu <jeromewus@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},"engines":{"node":">=12.16.1"},"homepage":"https://github.com/ffmpegwasm/ffmpeg.wasm#readme","dependencies":{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},"devDependencies":{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.11.0","@types/emscripten":"^1.39.4","babel-eslint":"^10.1.0","babel-loader":"^8.1.0","chai":"^4.2.0","cors":"^2.8.5","eslint":"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1","express":"^4.17.1","mocha":"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0","webpack":"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"}}')}}]);
//# sourceMappingURL=6186.fdc663d3.chunk.js.map